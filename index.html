<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SkyScout - Professional Flight Search</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    
    * {
      font-family: 'Inter', sans-serif;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .flight-card {
      transition: all 0.3s ease;
    }
    
    .flight-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .animate-pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    // Lucide Icons as SVG components
    const Icon = ({ name, size = 24, className = "", ...props }) => {
      const icons = {
        Search: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>,
        TrendingDown: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline></svg>,
        Bell: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path></svg>,
        Calendar: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg>,
        Users: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>,
        Plane: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"></path></svg>,
        Clock: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>,
        DollarSign: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="12" x2="12" y1="2" y2="22"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>,
        MapPin: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></svg>,
        Menu: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg>,
        X: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>,
        Star: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>,
        Filter: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>,
        ArrowRight: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg>,
        Sparkles: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path><path d="M5 3v4"></path><path d="M19 17v4"></path><path d="M3 5h4"></path><path d="M17 19h4"></path></svg>,
        BarChart3: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 3v18h18"></path><path d="M18 17V9"></path><path d="M13 17V5"></path><path d="M8 17v-3"></path></svg>,
        Globe: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><line x1="2" x2="22" y1="12" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>,
        Sun: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>,
        Info: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg>,
        ChevronDown: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m6 9 6 6 6-6"></path></svg>,
        Trash2: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>,
        ExternalLink: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg>,
        Zap: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>,
        TrendingUp: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>,
        Cloud: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"></path></svg>,
        Repeat: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m17 2 4 4-4 4"></path><path d="M3 11v-1a4 4 0 0 1 4-4h14"></path><path d="m7 22-4-4 4-4"></path><path d="M21 13v1a4 4 0 0 1-4 4H3"></path></svg>,
      };
      return icons[name] || null;
    };

    const SkyScout = () => {
      const [activeTab, setActiveTab] = useState('search');
      const [tripType, setTripType] = useState('round-trip');
      const [searchParams, setSearchParams] = useState({
        from: '',
        to: '',
        departDate: '',
        returnDate: '',
        passengers: 1,
        class: 'ECONOMY'
      });
      const [flights, setFlights] = useState([]);
      const [loading, setLoading] = useState(false);
      const [error, setError] = useState('');
      const [accessToken, setAccessToken] = useState('');
      const [sortBy, setSortBy] = useState('price');
      const [priceAlerts, setPriceAlerts] = useState([]);
      const [savedSearches, setSavedSearches] = useState([]);
      const [favoriteRoutes, setFavoriteRoutes] = useState([]);
      const [airportSuggestions, setAirportSuggestions] = useState([]);
      const [showSuggestions, setShowSuggestions] = useState({ from: false, to: false });
      const [flexibleDates, setFlexibleDates] = useState([]);
      const [showMobileMenu, setShowMobileMenu] = useState(false);
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [username, setUsername] = useState('');
      const [currencyConverter, setCurrencyConverter] = useState({ from: 'USD', to: 'EUR', amount: 100, result: 0 });
      const [weatherInfo, setWeatherInfo] = useState(null);
      const [selectedFlight, setSelectedFlight] = useState(null);
      const [showBookingModal, setShowBookingModal] = useState(false);

      const API_KEY = '5VMWyRgkMAmC6zlTYDcYYyU1wAg8Xz7T';
      const API_SECRET = 'IzGkoG0NaYJum5iU';

      // Get Amadeus access token
      const getAccessToken = async () => {
        try {
          const response = await fetch('https://test.api.amadeus.com/v1/security/oauth2/token', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `grant_type=client_credentials&client_id=${API_KEY}&client_secret=${API_SECRET}`
          });
          
          const data = await response.json();
          if (data.access_token) {
            setAccessToken(data.access_token);
            return data.access_token;
          }
        } catch (err) {
          setError('Failed to authenticate with Amadeus API');
          console.error(err);
        }
      };

      useEffect(() => {
        getAccessToken();
        loadUserData();
      }, []);

      const loadUserData = () => {
        const stored = {
          alerts: JSON.parse(localStorage.getItem('priceAlerts') || '[]'),
          searches: JSON.parse(localStorage.getItem('savedSearches') || '[]'),
          favorites: JSON.parse(localStorage.getItem('favoriteRoutes') || '[]'),
          user: localStorage.getItem('username')
        };
        
        setPriceAlerts(stored.alerts);
        setSavedSearches(stored.searches);
        setFavoriteRoutes(stored.favorites);
        if (stored.user) {
          setIsLoggedIn(true);
          setUsername(stored.user);
        }
      };

      const searchAirports = async (query, field) => {
        if (!query || query.length < 2) {
          setAirportSuggestions([]);
          return;
        }

        try {
          const token = accessToken || await getAccessToken();
          const response = await fetch(
            `https://test.api.amadeus.com/v1/reference-data/locations?subType=AIRPORT&keyword=${query}&page[limit]=5`,
            {
              headers: {
                'Authorization': `Bearer ${token}`
              }
            }
          );

          const data = await response.json();
          if (data.data) {
            setAirportSuggestions(data.data);
            setShowSuggestions({ ...showSuggestions, [field]: true });
          }
        } catch (err) {
          console.error('Airport search error:', err);
        }
      };

      const searchFlights = async () => {
        if (!searchParams.from || !searchParams.to || !searchParams.departDate) {
          setError('Please fill in all required fields');
          return;
        }

        setLoading(true);
        setError('');

        try {
          const token = accessToken || await getAccessToken();
          let url = `https://test.api.amadeus.com/v2/shopping/flight-offers?originLocationCode=${searchParams.from}&destinationLocationCode=${searchParams.to}&departureDate=${searchParams.departDate}&adults=${searchParams.passengers}&travelClass=${searchParams.class}&max=50`;
          
          if (tripType === 'round-trip' && searchParams.returnDate) {
            url += `&returnDate=${searchParams.returnDate}`;
          }

          const response = await fetch(url, {
            headers: {
              'Authorization': `Bearer ${token}`
            }
          });

          const data = await response.json();
          
          if (data.data && data.data.length > 0) {
            setFlights(data.data);
            saveSearch();
            generateFlexibleDates();
          } else {
            setError('No flights found for this route');
            setFlights([]);
          }
        } catch (err) {
          setError('Failed to search flights. Please try again.');
          console.error(err);
        } finally {
          setLoading(false);
        }
      };

      const generateFlexibleDates = () => {
        const dates = [];
        const baseDate = new Date(searchParams.departDate);
        
        for (let i = -3; i <= 3; i++) {
          const date = new Date(baseDate);
          date.setDate(baseDate.getDate() + i);
          dates.push({
            date: date.toISOString().split('T')[0],
            offset: i,
            price: Math.floor(Math.random() * 200) + 300
          });
        }
        
        setFlexibleDates(dates);
      };

      const saveSearch = () => {
        const search = {
          from: searchParams.from,
          to: searchParams.to,
          date: searchParams.departDate,
          timestamp: new Date().toISOString()
        };
        
        const updated = [search, ...savedSearches.slice(0, 9)];
        setSavedSearches(updated);
        localStorage.setItem('savedSearches', JSON.stringify(updated));
      };

      const addPriceAlert = (flight) => {
        const alert = {
          id: Date.now(),
          route: `${searchParams.from} → ${searchParams.to}`,
          price: parseFloat(flight.price.total),
          date: searchParams.departDate,
          created: new Date().toISOString(),
          active: true
        };
        
        const updated = [...priceAlerts, alert];
        setPriceAlerts(updated);
        localStorage.setItem('priceAlerts', JSON.stringify(updated));
      };

      const deletePriceAlert = (id) => {
        const updated = priceAlerts.filter(alert => alert.id !== id);
        setPriceAlerts(updated);
        localStorage.setItem('priceAlerts', JSON.stringify(updated));
      };

      const toggleFavorite = () => {
        const route = {
          from: searchParams.from,
          to: searchParams.to,
          id: `${searchParams.from}-${searchParams.to}`
        };
        
        const exists = favoriteRoutes.find(r => r.id === route.id);
        let updated;
        
        if (exists) {
          updated = favoriteRoutes.filter(r => r.id !== route.id);
        } else {
          updated = [...favoriteRoutes, route];
        }
        
        setFavoriteRoutes(updated);
        localStorage.setItem('favoriteRoutes', JSON.stringify(updated));
      };

      const isFavorite = useMemo(() => {
        return favoriteRoutes.some(r => r.id === `${searchParams.from}-${searchParams.to}`);
      }, [favoriteRoutes, searchParams.from, searchParams.to]);

      const sortedFlights = useMemo(() => {
        if (!flights.length) return [];
        
        return [...flights].sort((a, b) => {
          switch (sortBy) {
            case 'price':
              return parseFloat(a.price.total) - parseFloat(b.price.total);
            case 'duration':
              const durationA = a.itineraries[0].duration.replace('PT', '').replace('H', '.').replace('M', '');
              const durationB = b.itineraries[0].duration.replace('PT', '').replace('H', '.').replace('M', '');
              return parseFloat(durationA) - parseFloat(durationB);
            case 'best':
              const scoreA = parseFloat(a.price.total) / parseFloat(a.itineraries[0].duration.replace('PT', '').replace('H', '.').replace('M', ''));
              const scoreB = parseFloat(b.price.total) / parseFloat(b.itineraries[0].duration.replace('PT', '').replace('H', '.').replace('M', ''));
              return scoreA - scoreB;
            default:
              return 0;
          }
        });
      }, [flights, sortBy]);

      const cheapestFlight = useMemo(() => {
        if (!flights.length) return null;
        return flights.reduce((min, flight) => 
          parseFloat(flight.price.total) < parseFloat(min.price.total) ? flight : min
        );
      }, [flights]);

      const formatDuration = (duration) => {
        const hours = duration.match(/(\d+)H/)?.[1] || '0';
        const minutes = duration.match(/(\d+)M/)?.[1] || '0';
        return `${hours}h ${minutes}m`;
      };

      const formatTime = (dateTime) => {
        return new Date(dateTime).toLocaleTimeString('en-US', { 
          hour: '2-digit', 
          minute: '2-digit',
          hour12: true 
        });
      };

      const handleLogin = () => {
        const name = prompt('Enter your name:');
        if (name) {
          setUsername(name);
          setIsLoggedIn(true);
          localStorage.setItem('username', name);
        }
      };

      const handleLogout = () => {
        setIsLoggedIn(false);
        setUsername('');
        localStorage.removeItem('username');
      };

      const convertCurrency = () => {
        // Mock currency conversion (in production, use a real API like exchangerate-api.com)
        const rates = {
          'USD-EUR': 0.92,
          'EUR-USD': 1.09,
          'USD-GBP': 0.79,
          'GBP-USD': 1.27,
          'USD-JPY': 149.50,
          'JPY-USD': 0.0067
        };
        const rate = rates[`${currencyConverter.from}-${currencyConverter.to}`] || 1;
        setCurrencyConverter({
          ...currencyConverter,
          result: (currencyConverter.amount * rate).toFixed(2)
        });
      };

      const handleBookFlight = (flight) => {
        setSelectedFlight(flight);
        setShowBookingModal(true);
      };

      const bookingPartners = [
        { name: 'Expedia', url: 'https://www.expedia.com' },
        { name: 'Kayak', url: 'https://www.kayak.com' },
        { name: 'Skyscanner', url: 'https://www.skyscanner.com' },
        { name: 'Google Flights', url: 'https://www.google.com/flights' }
      ];

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50">
          {/* Header */}
          <header className="bg-white shadow-sm border-b sticky top-0 z-50">
            <div className="max-w-7xl mx-auto px-4 py-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-2">
                  <div className="bg-gradient-to-br from-blue-600 to-purple-600 p-2 rounded-lg">
                    <Icon name="Plane" size={24} className="text-white" />
                  </div>
                  <div>
                    <h1 className="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                      SkyScout
                    </h1>
                    <p className="text-xs text-gray-500">Find Your Perfect Flight</p>
                  </div>
                </div>

                {/* Desktop Navigation */}
                <nav className="hidden md:flex items-center space-x-6">
                  <button
                    onClick={() => setActiveTab('search')}
                    className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition ${
                      activeTab === 'search' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-100'
                    }`}
                  >
                    <Icon name="Search" size={18} />
                    <span>Search</span>
                  </button>
                  <button
                    onClick={() => setActiveTab('deals')}
                    className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition ${
                      activeTab === 'deals' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-100'
                    }`}
                  >
                    <Icon name="TrendingDown" size={18} />
                    <span>Deals</span>
                  </button>
                  <button
                    onClick={() => setActiveTab('alerts')}
                    className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition relative ${
                      activeTab === 'alerts' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-100'
                    }`}
                  >
                    <Icon name="Bell" size={18} />
                    <span>Alerts</span>
                    {priceAlerts.length > 0 && (
                      <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
                        {priceAlerts.length}
                      </span>
                    )}
                  </button>
                  <button
                    onClick={() => setActiveTab('tools')}
                    className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition ${
                      activeTab === 'tools' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-100'
                    }`}
                  >
                    <Icon name="Globe" size={18} />
                    <span>Tools</span>
                  </button>
                  <button
                    onClick={() => setActiveTab('profile')}
                    className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition ${
                      activeTab === 'profile' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-100'
                    }`}
                  >
                    <Icon name="Users" size={18} />
                    <span>{isLoggedIn ? username : 'Account'}</span>
                  </button>
                </nav>

                {/* Mobile Menu Button */}
                <button
                  className="md:hidden p-2 hover:bg-gray-100 rounded-lg"
                  onClick={() => setShowMobileMenu(!showMobileMenu)}
                >
                  {showMobileMenu ? <Icon name="X" size={24} /> : <Icon name="Menu" size={24} />}
                </button>
              </div>

              {/* Mobile Menu */}
              {showMobileMenu && (
                <nav className="md:hidden mt-4 space-y-2 pb-4">
                  <button
                    onClick={() => { setActiveTab('search'); setShowMobileMenu(false); }}
                    className="w-full flex items-center space-x-2 px-4 py-2 rounded-lg bg-gray-50 hover:bg-gray-100"
                  >
                    <Icon name="Search" size={18} />
                    <span>Search</span>
                  </button>
                  <button
                    onClick={() => { setActiveTab('deals'); setShowMobileMenu(false); }}
                    className="w-full flex items-center space-x-2 px-4 py-2 rounded-lg bg-gray-50 hover:bg-gray-100"
                  >
                    <Icon name="TrendingDown" size={18} />
                    <span>Deals</span>
                  </button>
                  <button
                    onClick={() => { setActiveTab('alerts'); setShowMobileMenu(false); }}
                    className="w-full flex items-center space-x-2 px-4 py-2 rounded-lg bg-gray-50 hover:bg-gray-100"
                  >
                    <Icon name="Bell" size={18} />
                    <span>Alerts ({priceAlerts.length})</span>
                  </button>
                  <button
                    onClick={() => { setActiveTab('tools'); setShowMobileMenu(false); }}
                    className="w-full flex items-center space-x-2 px-4 py-2 rounded-lg bg-gray-50 hover:bg-gray-100"
                  >
                    <Icon name="Globe" size={18} />
                    <span>Tools</span>
                  </button>
                  <button
                    onClick={() => { setActiveTab('profile'); setShowMobileMenu(false); }}
                    className="w-full flex items-center space-x-2 px-4 py-2 rounded-lg bg-gray-50 hover:bg-gray-100"
                  >
                    <Icon name="Users" size={18} />
                    <span>{isLoggedIn ? username : 'Account'}</span>
                  </button>
                </nav>
              )}
            </div>
          </header>

          <main className="max-w-7xl mx-auto px-4 py-8">
            {/* Search Tab */}
            {activeTab === 'search' && (
              <div className="space-y-6">
                {/* Search Form */}
                <div className="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                  <div className="flex items-center justify-between mb-6">
                    <h2 className="text-2xl font-bold text-gray-800">Find Your Flight</h2>
                    {searchParams.from && searchParams.to && (
                      <button
                        onClick={toggleFavorite}
                        className="p-2 rounded-full hover:bg-gray-100 transition"
                      >
                        <Icon name="Star" size={20} className={isFavorite ? 'fill-yellow-400 text-yellow-400' : 'text-gray-400'} />
                      </button>
                    )}
                  </div>

                  {/* Trip Type */}
                  <div className="flex space-x-4 mb-6">
                    <button
                      onClick={() => setTripType('round-trip')}
                      className={`px-6 py-2 rounded-lg font-medium transition ${
                        tripType === 'round-trip'
                          ? 'bg-blue-600 text-white'
                          : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                      }`}
                    >
                      Round Trip
                    </button>
                    <button
                      onClick={() => setTripType('one-way')}
                      className={`px-6 py-2 rounded-lg font-medium transition ${
                        tripType === 'one-way'
                          ? 'bg-blue-600 text-white'
                          : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                      }`}
                    >
                      One Way
                    </button>
                  </div>

                  {/* Search Fields */}
                  <div className="grid md:grid-cols-2 gap-4 mb-4">
                    {/* From */}
                    <div className="relative">
                      <label className="block text-sm font-medium text-gray-700 mb-2">From</label>
                      <div className="relative">
                        <Icon name="MapPin" size={20} className="absolute left-3 top-3 text-gray-400" />
                        <input
                          type="text"
                          placeholder="Airport code (e.g., JFK)"
                          value={searchParams.from}
                          onChange={(e) => {
                            setSearchParams({ ...searchParams, from: e.target.value.toUpperCase() });
                            searchAirports(e.target.value, 'from');
                          }}
                          className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                      </div>
                      {showSuggestions.from && airportSuggestions.length > 0 && (
                        <div className="absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto">
                          {airportSuggestions.map((airport) => (
                            <button
                              key={airport.id}
                              onClick={() => {
                                setSearchParams({ ...searchParams, from: airport.iataCode });
                                setShowSuggestions({ ...showSuggestions, from: false });
                              }}
                              className="w-full px-4 py-3 text-left hover:bg-blue-50 border-b last:border-b-0"
                            >
                              <div className="font-medium">{airport.iataCode} - {airport.name}</div>
                              <div className="text-sm text-gray-500">{airport.address?.cityName}, {airport.address?.countryName}</div>
                            </button>
                          ))}
                        </div>
                      )}
                    </div>

                    {/* To */}
                    <div className="relative">
                      <label className="block text-sm font-medium text-gray-700 mb-2">To</label>
                      <div className="relative">
                        <Icon name="MapPin" size={20} className="absolute left-3 top-3 text-gray-400" />
                        <input
                          type="text"
                          placeholder="Airport code (e.g., LAX)"
                          value={searchParams.to}
                          onChange={(e) => {
                            setSearchParams({ ...searchParams, to: e.target.value.toUpperCase() });
                            searchAirports(e.target.value, 'to');
                          }}
                          className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                      </div>
                      {showSuggestions.to && airportSuggestions.length > 0 && (
                        <div className="absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto">
                          {airportSuggestions.map((airport) => (
                            <button
                              key={airport.id}
                              onClick={() => {
                                setSearchParams({ ...searchParams, to: airport.iataCode });
                                setShowSuggestions({ ...showSuggestions, to: false });
                              }}
                              className="w-full px-4 py-3 text-left hover:bg-blue-50 border-b last:border-b-0"
                            >
                              <div className="font-medium">{airport.iataCode} - {airport.name}</div>
                              <div className="text-sm text-gray-500">{airport.address?.cityName}, {airport.address?.countryName}</div>
                            </button>
                          ))}
                        </div>
                      )}
                    </div>

                    {/* Depart Date */}
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Departure</label>
                      <div className="relative">
                        <Icon name="Calendar" size={20} className="absolute left-3 top-3 text-gray-400" />
                        <input
                          type="date"
                          value={searchParams.departDate}
                          onChange={(e) => setSearchParams({ ...searchParams, departDate: e.target.value })}
                          min={new Date().toISOString().split('T')[0]}
                          className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                      </div>
                    </div>

                    {/* Return Date */}
                    {tripType === 'round-trip' && (
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Return</label>
                        <div className="relative">
                          <Icon name="Calendar" size={20} className="absolute left-3 top-3 text-gray-400" />
                          <input
                            type="date"
                            value={searchParams.returnDate}
                            onChange={(e) => setSearchParams({ ...searchParams, returnDate: e.target.value })}
                            min={searchParams.departDate || new Date().toISOString().split('T')[0]}
                            className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                      </div>
                    )}

                    {/* Passengers */}
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Passengers</label>
                      <div className="relative">
                        <Icon name="Users" size={20} className="absolute left-3 top-3 text-gray-400" />
                        <select
                          value={searchParams.passengers}
                          onChange={(e) => setSearchParams({ ...searchParams, passengers: parseInt(e.target.value) })}
                          className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none"
                        >
                          {[1,2,3,4,5,6,7,8,9].map(n => (
                            <option key={n} value={n}>{n} {n === 1 ? 'Adult' : 'Adults'}</option>
                          ))}
                        </select>
                      </div>
                    </div>

                    {/* Class */}
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Class</label>
                      <select
                        value={searchParams.class}
                        onChange={(e) => setSearchParams({ ...searchParams, class: e.target.value })}
                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      >
                        <option value="ECONOMY">Economy</option>
                        <option value="PREMIUM_ECONOMY">Premium Economy</option>
                        <option value="BUSINESS">Business</option>
                        <option value="FIRST">First Class</option>
                      </select>
                    </div>
                  </div>

                  <button
                    onClick={searchFlights}
                    disabled={loading}
                    className="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition flex items-center justify-center space-x-2 disabled:opacity-50"
                  >
                    {loading ? (
                      <>
                        <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white"></div>
                        <span>Searching...</span>
                      </>
                    ) : (
                      <>
                        <Icon name="Search" size={20} />
                        <span>Search Flights</span>
                      </>
                    )}
                  </button>

                  {error && (
                    <div className="mt-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600">
                      {error}
                    </div>
                  )}
                </div>

                {/* Flexible Dates */}
                {flexibleDates.length > 0 && (
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <h3 className="text-lg font-bold mb-4 flex items-center space-x-2">
                      <Icon name="Calendar" size={20} className="text-blue-600" />
                      <span>Flexible Dates (±3 Days)</span>
                    </h3>
                    <div className="grid grid-cols-2 md:grid-cols-7 gap-2">
                      {flexibleDates.map((date) => (
                        <button
                          key={date.date}
                          onClick={() => setSearchParams({ ...searchParams, departDate: date.date })}
                          className={`p-3 rounded-lg border transition ${
                            date.date === searchParams.departDate
                              ? 'border-blue-600 bg-blue-50'
                              : 'border-gray-200 hover:border-blue-300'
                          }`}
                        >
                          <div className="text-xs text-gray-500">
                            {date.offset === 0 ? 'Today' : `${date.offset > 0 ? '+' : ''}${date.offset}d`}
                          </div>
                          <div className="text-sm font-medium">{new Date(date.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</div>
                          <div className="text-xs font-bold text-green-600">${date.price}</div>
                        </button>
                      ))}
                    </div>
                  </div>
                )}

                {/* Results */}
                {flights.length > 0 && (
                  <div className="space-y-4">
                    {/* Sorting and Filters */}
                    <div className="bg-white rounded-xl shadow-lg p-4 flex flex-wrap items-center justify-between gap-4">
                      <div className="flex items-center space-x-2">
                        <Icon name="Filter" size={20} className="text-gray-600" />
                        <span className="font-medium text-gray-700">{flights.length} flights found</span>
                      </div>
                      
                      <div className="flex items-center space-x-2">
                        <span className="text-sm text-gray-600">Sort by:</span>
                        <select
                          value={sortBy}
                          onChange={(e) => setSortBy(e.target.value)}
                          className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                        >
                          <option value="price">Lowest Price</option>
                          <option value="duration">Shortest Duration</option>
                          <option value="best">Best Value</option>
                        </select>
                      </div>
                    </div>

                    {/* Cheapest Flight Banner */}
                    {cheapestFlight && sortBy === 'price' && (
                      <div className="bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl shadow-lg p-6 text-white">
                        <div className="flex items-center space-x-2 mb-2">
                          <Icon name="Sparkles" size={24} />
                          <h3 className="text-xl font-bold">Cheapest Flight Found!</h3>
                        </div>
                        <div className="flex items-center justify-between">
                          <div>
                            <p className="text-3xl font-bold">${cheapestFlight.price.total}</p>
                            <p className="text-sm opacity-90">{cheapestFlight.validatingAirlineCodes?.[0] || 'Airline'}</p>
                          </div>
                          <div className="text-right">
                            <p className="text-sm opacity-90">Duration</p>
                            <p className="font-semibold">{formatDuration(cheapestFlight.itineraries[0].duration)}</p>
                          </div>
                        </div>
                      </div>
                    )}

                    {/* Flight Cards */}
                    {sortedFlights.map((flight, index) => (
                      <div key={index} className="flight-card bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition">
                        <div className="flex flex-col md:flex-row md:items-center justify-between gap-4">
                          <div className="flex-1">
                            <div className="flex items-center justify-between mb-4">
                              <div>
                                <p className="text-2xl font-bold text-gray-800">{searchParams.from} → {searchParams.to}</p>
                                <p className="text-sm text-gray-500">
                                  {flight.validatingAirlineCodes?.[0] || 'Airline'} • {flight.itineraries[0].segments.length === 1 ? 'Non-stop' : `${flight.itineraries[0].segments.length - 1} stop(s)`}
                                </p>
                              </div>
                              {index === 0 && sortBy === 'price' && (
                                <span className="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-semibold">
                                  Best Deal
                                </span>
                              )}
                            </div>

                            <div className="grid md:grid-cols-3 gap-4 mb-4">
                              <div className="flex items-center space-x-2">
                                <Icon name="Clock" size={18} className="text-blue-600" />
                                <div>
                                  <p className="text-xs text-gray-500">Duration</p>
                                  <p className="font-semibold">{formatDuration(flight.itineraries[0].duration)}</p>
                                </div>
                              </div>

                              <div className="flex items-center space-x-2">
                                <Icon name="Plane" size={18} className="text-blue-600" />
                                <div>
                                  <p className="text-xs text-gray-500">Departure</p>
                                  <p className="font-semibold">{formatTime(flight.itineraries[0].segments[0].departure.at)}</p>
                                </div>
                              </div>

                              <div className="flex items-center space-x-2">
                                <Icon name="Plane" size={18} className="text-blue-600" />
                                <div>
                                  <p className="text-xs text-gray-500">Arrival</p>
                                  <p className="font-semibold">
                                    {formatTime(flight.itineraries[0].segments[flight.itineraries[0].segments.length - 1].arrival.at)}
                                  </p>
                                </div>
                              </div>
                            </div>

                            {/* Segments */}
                            <div className="bg-gray-50 rounded-lg p-3 space-y-2">
                              {flight.itineraries[0].segments.map((segment, segIndex) => (
                                <div key={segIndex} className="text-sm text-gray-600 flex items-center space-x-2">
                                  <Icon name="ArrowRight" size={14} />
                                  <span>
                                    {segment.departure.iataCode} → {segment.arrival.iataCode} • 
                                    {segment.carrierCode} {segment.number}
                                  </span>
                                </div>
                              ))}
                            </div>
                          </div>

                          <div className="md:text-right flex md:flex-col items-center md:items-end gap-4">
                            <div>
                              <p className="text-3xl font-bold text-blue-600">${flight.price.total}</p>
                              <p className="text-xs text-gray-500">{flight.price.currency}</p>
                            </div>
                            
                            <div className="flex flex-col gap-2 w-full md:w-auto">
                              <button
                                onClick={() => handleBookFlight(flight)}
                                className="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition flex items-center justify-center space-x-2"
                              >
                                <span>Book Now</span>
                                <Icon name="ExternalLink" size={16} />
                              </button>
                              
                              <button
                                onClick={() => addPriceAlert(flight)}
                                className="border border-gray-300 text-gray-700 px-6 py-2 rounded-lg font-medium hover:bg-gray-50 transition flex items-center justify-center space-x-2"
                              >
                                <Icon name="Bell" size={16} />
                                <span>Set Alert</span>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            )}

            {/* Deals Tab */}
            {activeTab === 'deals' && (
              <div className="space-y-6">
                <div className="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                  <div className="flex items-center space-x-3 mb-6">
                    <Icon name="TrendingDown" size={32} className="text-green-600" />
                    <div>
                      <h2 className="text-2xl font-bold text-gray-800">Hot Deals</h2>
                      <p className="text-gray-500">Best flight deals updated daily</p>
                    </div>
                  </div>

                  <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {/* Mock Deals */}
                    {[
                      { from: 'NYC', to: 'LAX', price: 189, discount: 45, airline: 'Delta' },
                      { from: 'SFO', to: 'MIA', price: 229, discount: 38, airline: 'United' },
                      { from: 'CHI', to: 'SEA', price: 149, discount: 52, airline: 'American' },
                      { from: 'BOS', to: 'LAS', price: 199, discount: 41, airline: 'JetBlue' },
                      { from: 'DFW', to: 'DEN', price: 129, discount: 35, airline: 'Southwest' },
                      { from: 'ATL', to: 'PHX', price: 169, discount: 48, airline: 'Delta' }
                    ].map((deal, index) => (
                      <div key={index} className="bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 border-2 border-blue-100 hover:border-blue-300 transition">
                        <div className="flex items-start justify-between mb-4">
                          <div>
                            <h3 className="text-2xl font-bold text-gray-800">{deal.from} → {deal.to}</h3>
                            <p className="text-sm text-gray-500">{deal.airline}</p>
                          </div>
                          <span className="bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold">
                            -{deal.discount}%
                          </span>
                        </div>
                        
                        <div className="flex items-end justify-between">
                          <div>
                            <p className="text-xs text-gray-500">From</p>
                            <p className="text-3xl font-bold text-green-600">${deal.price}</p>
                          </div>
                          <button
                            onClick={() => {
                              setSearchParams({
                                ...searchParams,
                                from: deal.from,
                                to: deal.to
                              });
                              setActiveTab('search');
                            }}
                            className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"
                          >
                            View
                          </button>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Best Time to Buy */}
                <div className="bg-white rounded-xl shadow-lg p-6">
                  <div className="flex items-center space-x-2 mb-4">
                    <Icon name="Zap" size={24} className="text-yellow-600" />
                    <h3 className="text-xl font-bold">Best Time to Buy Tips</h3>
                  </div>
                  <div className="grid md:grid-cols-3 gap-4">
                    <div className="bg-blue-50 rounded-lg p-4">
                      <Icon name="Calendar" size={24} className="text-blue-600 mb-2" />
                      <h4 className="font-semibold mb-1">Book 2-3 months ahead</h4>
                      <p className="text-sm text-gray-600">Domestic flights are cheapest 1-3 months before departure</p>
                    </div>
                    <div className="bg-purple-50 rounded-lg p-4">
                      <Icon name="TrendingUp" size={24} className="text-purple-600 mb-2" />
                      <h4 className="font-semibold mb-1">Tuesday & Wednesday</h4>
                      <p className="text-sm text-gray-600">Typically the cheapest days to fly</p>
                    </div>
                    <div className="bg-green-50 rounded-lg p-4">
                      <Icon name="Clock" size={24} className="text-green-600 mb-2" />
                      <h4 className="font-semibold mb-1">Early morning flights</h4>
                      <p className="text-sm text-gray-600">Often less expensive than peak hours</p>
                    </div>
                  </div>
                </div>
              </div>
            )}

            {/* Alerts Tab */}
            {activeTab === 'alerts' && (
              <div className="space-y-6">
                <div className="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                  <div className="flex items-center space-x-3 mb-6">
                    <Icon name="Bell" size={32} className="text-blue-600" />
                    <div>
                      <h2 className="text-2xl font-bold text-gray-800">Price Alerts</h2>
                      <p className="text-gray-500">Get notified when prices drop</p>
                    </div>
                  </div>

                  {priceAlerts.length === 0 ? (
                    <div className="text-center py-12">
                      <Icon name="Bell" size={64} className="text-gray-300 mx-auto mb-4" />
                      <p className="text-gray-500 mb-4">No price alerts set yet</p>
                      <button
                        onClick={() => setActiveTab('search')}
                        className="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition"
                      >
                        Search Flights to Set Alerts
                      </button>
                    </div>
                  ) : (
                    <div className="space-y-4">
                      {priceAlerts.map((alert) => (
                        <div key={alert.id} className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200">
                          <div className="flex items-start justify-between">
                            <div className="flex-1">
                              <div className="flex items-center space-x-2 mb-2">
                                <Icon name="Plane" size={20} className="text-blue-600" />
                                <h3 className="text-xl font-bold">{alert.route}</h3>
                              </div>
                              <div className="grid grid-cols-2 gap-4 text-sm">
                                <div>
                                  <p className="text-gray-500">Target Price</p>
                                  <p className="font-semibold text-lg text-green-600">${alert.price}</p>
                                </div>
                                <div>
                                  <p className="text-gray-500">Travel Date</p>
                                  <p className="font-semibold">{new Date(alert.date).toLocaleDateString()}</p>
                                </div>
                              </div>
                              <p className="text-xs text-gray-500 mt-2">
                                Created: {new Date(alert.created).toLocaleDateString()}
                              </p>
                            </div>
                            <button
                              onClick={() => deletePriceAlert(alert.id)}
                              className="ml-4 p-2 text-red-600 hover:bg-red-50 rounded-lg transition"
                            >
                              <Icon name="Trash2" size={20} />
                            </button>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                </div>

                {/* Alert Settings */}
                <div className="bg-white rounded-xl shadow-lg p-6">
                  <h3 className="text-lg font-bold mb-4">Alert Preferences</h3>
                  <div className="space-y-3">
                    <label className="flex items-center space-x-3">
                      <input type="checkbox" className="w-5 h-5 text-blue-600" defaultChecked />
                      <span>Daily price check emails</span>
                    </label>
                    <label className="flex items-center space-x-3">
                      <input type="checkbox" className="w-5 h-5 text-blue-600" defaultChecked />
                      <span>Instant notifications for major drops</span>
                    </label>
                    <label className="flex items-center space-x-3">
                      <input type="checkbox" className="w-5 h-5 text-blue-600" />
                      <span>Weekly deal summary</span>
                    </label>
                  </div>
                </div>
              </div>
            )}

            {/* Tools Tab */}
            {activeTab === 'tools' && (
              <div className="space-y-6">
                {/* Currency Converter */}
                <div className="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                  <div className="flex items-center space-x-3 mb-6">
                    <Icon name="DollarSign" size={32} className="text-green-600" />
                    <div>
                      <h2 className="text-2xl font-bold text-gray-800">Currency Converter</h2>
                      <p className="text-gray-500">Convert prices to your currency</p>
                    </div>
                  </div>

                  <div className="grid md:grid-cols-4 gap-4 mb-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Amount</label>
                      <input
                        type="number"
                        value={currencyConverter.amount}
                        onChange={(e) => setCurrencyConverter({ ...currencyConverter, amount: parseFloat(e.target.value) || 0 })}
                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">From</label>
                      <select
                        value={currencyConverter.from}
                        onChange={(e) => setCurrencyConverter({ ...currencyConverter, from: e.target.value })}
                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                      >
                        <option value="USD">USD ($)</option>
                        <option value="EUR">EUR (€)</option>
                        <option value="GBP">GBP (£)</option>
                        <option value="JPY">JPY (¥)</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">To</label>
                      <select
                        value={currencyConverter.to}
                        onChange={(e) => setCurrencyConverter({ ...currencyConverter, to: e.target.value })}
                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                      >
                        <option value="EUR">EUR (€)</option>
                        <option value="USD">USD ($)</option>
                        <option value="GBP">GBP (£)</option>
                        <option value="JPY">JPY (¥)</option>
                      </select>
                    </div>
                    <div className="flex items-end">
                      <button
                        onClick={convertCurrency}
                        className="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition"
                      >
                        Convert
                      </button>
                    </div>
                  </div>

                  {currencyConverter.result > 0 && (
                    <div className="bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-6 border border-green-200">
                      <p className="text-sm text-gray-600 mb-1">Converted Amount</p>
                      <p className="text-4xl font-bold text-green-600">
                        {currencyConverter.result} {currencyConverter.to}
                      </p>
                    </div>
                  )}
                </div>

                {/* Travel Tools Grid */}
                <div className="grid md:grid-cols-2 gap-6">
                  {/* Time Zones */}
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <div className="flex items-center space-x-2 mb-4">
                      <Icon name="Clock" size={24} className="text-blue-600" />
                      <h3 className="text-xl font-bold">Time Zone Info</h3>
                    </div>
                    <div className="space-y-3">
                      <div className="bg-blue-50 rounded-lg p-4">
                        <p className="text-sm text-gray-600">New York (EST)</p>
                        <p className="text-2xl font-bold">{new Date().toLocaleTimeString('en-US', { timeZone: 'America/New_York', hour: '2-digit', minute: '2-digit' })}</p>
                      </div>
                      <div className="bg-purple-50 rounded-lg p-4">
                        <p className="text-sm text-gray-600">London (GMT)</p>
                        <p className="text-2xl font-bold">{new Date().toLocaleTimeString('en-GB', { timeZone: 'Europe/London', hour: '2-digit', minute: '2-digit' })}</p>
                      </div>
                      <div className="bg-green-50 rounded-lg p-4">
                        <p className="text-sm text-gray-600">Tokyo (JST)</p>
                        <p className="text-2xl font-bold">{new Date().toLocaleTimeString('ja-JP', { timeZone: 'Asia/Tokyo', hour: '2-digit', minute: '2-digit' })}</p>
                      </div>
                    </div>
                  </div>

                  {/* Weather Info */}
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <div className="flex items-center space-x-2 mb-4">
                      <Icon name="Sun" size={24} className="text-yellow-600" />
                      <h3 className="text-xl font-bold">Destination Weather</h3>
                    </div>
                    <div className="text-center py-8">
                      <Icon name="Cloud" size={64} className="text-gray-300 mx-auto mb-4" />
                      <p className="text-gray-500 mb-4">Select a destination to see weather forecast</p>
                      {searchParams.to && (
                        <div className="bg-blue-50 rounded-lg p-4">
                          <p className="text-lg font-semibold mb-2">{searchParams.to}</p>
                          <p className="text-gray-600 text-sm">Weather data would appear here with a real weather API</p>
                        </div>
                      )}
                    </div>
                  </div>

                  {/* Visa Information */}
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <div className="flex items-center space-x-2 mb-4">
                      <Icon name="Info" size={24} className="text-purple-600" />
                      <h3 className="text-xl font-bold">Visa Requirements</h3>
                    </div>
                    <div className="space-y-3">
                      <p className="text-sm text-gray-600">General visa information for popular destinations:</p>
                      <div className="bg-green-50 border border-green-200 rounded-lg p-4">
                        <p className="font-semibold text-green-800">🇺🇸 United States</p>
                        <p className="text-sm text-gray-600">ESTA required for visa waiver countries</p>
                      </div>
                      <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <p className="font-semibold text-blue-800">🇪🇺 European Union</p>
                        <p className="text-sm text-gray-600">Schengen visa or visa-free for many countries</p>
                      </div>
                      <div className="bg-purple-50 border border-purple-200 rounded-lg p-4">
                        <p className="font-semibold text-purple-800">🇯🇵 Japan</p>
                        <p className="text-sm text-gray-600">Visa-free for many countries (up to 90 days)</p>
                      </div>
                      <p className="text-xs text-gray-500 italic">Always verify current requirements with official sources</p>
                    </div>
                  </div>

                  {/* Baggage Calculator */}
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <div className="flex items-center space-x-2 mb-4">
                      <Icon name="BarChart3" size={24} className="text-orange-600" />
                      <h3 className="text-xl font-bold">Baggage Info</h3>
                    </div>
                    <div className="space-y-3">
                      <p className="text-sm text-gray-600">Standard airline baggage allowances:</p>
                      <div className="bg-blue-50 rounded-lg p-4">
                        <p className="font-semibold mb-1">Economy</p>
                        <p className="text-sm text-gray-600">1 carry-on + 1 personal item</p>
                        <p className="text-sm text-gray-600">Checked: 23kg (50lbs)</p>
                      </div>
                      <div className="bg-purple-50 rounded-lg p-4">
                        <p className="font-semibold mb-1">Business</p>
                        <p className="text-sm text-gray-600">2 carry-ons + 1 personal item</p>
                        <p className="text-sm text-gray-600">Checked: 32kg (70lbs) x 2</p>
                      </div>
                      <div className="bg-yellow-50 rounded-lg p-4">
                        <p className="font-semibold mb-1">First Class</p>
                        <p className="text-sm text-gray-600">3 carry-ons</p>
                        <p className="text-sm text-gray-600">Checked: 32kg (70lbs) x 3</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            )}

            {/* Profile Tab */}
            {activeTab === 'profile' && (
              <div className="space-y-6">
                <div className="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                  <div className="flex items-center space-x-3 mb-6">
                    <Icon name="Users" size={32} className="text-blue-600" />
                    <div>
                      <h2 className="text-2xl font-bold text-gray-800">Account</h2>
                      <p className="text-gray-500">Manage your profile and preferences</p>
                    </div>
                  </div>

                  {!isLoggedIn ? (
                    <div className="text-center py-12">
                      <div className="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <Icon name="Users" size={48} className="text-gray-400" />
                      </div>
                      <h3 className="text-xl font-bold mb-2">Sign in to SkyScout</h3>
                      <p className="text-gray-500 mb-6">Save your searches, set alerts, and get personalized recommendations</p>
                      <button
                        onClick={handleLogin}
                        className="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition"
                      >
                        Sign In / Sign Up
                      </button>
                    </div>
                  ) : (
                    <div>
                      <div className="flex items-center space-x-4 mb-8 pb-6 border-b">
                        <div className="w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white text-3xl font-bold">
                          {username.charAt(0).toUpperCase()}
                        </div>
                        <div className="flex-1">
                          <h3 className="text-2xl font-bold">{username}</h3>
                          <p className="text-gray-500">SkyScout Member</p>
                        </div>
                        <button
                          onClick={handleLogout}
                          className="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition"
                        >
                          Sign Out
                        </button>
                      </div>

                      {/* Saved Searches */}
                      <div className="mb-8">
                        <h3 className="text-lg font-bold mb-4 flex items-center space-x-2">
                          <Icon name="Clock" size={20} />
                          <span>Recent Searches</span>
                        </h3>
                        {savedSearches.length === 0 ? (
                          <p className="text-gray-500 text-center py-6">No recent searches</p>
                        ) : (
                          <div className="space-y-2">
                            {savedSearches.slice(0, 5).map((search, index) => (
                              <button
                                key={index}
                                onClick={() => {
                                  setSearchParams({
                                    ...searchParams,
                                    from: search.from,
                                    to: search.to,
                                    departDate: search.date
                                  });
                                  setActiveTab('search');
                                }}
                                className="w-full bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition text-left"
                              >
                                <div className="flex items-center justify-between">
                                  <div className="flex items-center space-x-3">
                                    <Icon name="Plane" size={18} className="text-blue-600" />
                                    <span className="font-semibold">{search.from} → {search.to}</span>
                                  </div>
                                  <span className="text-sm text-gray-500">
                                    {new Date(search.date).toLocaleDateString()}
                                  </span>
                                </div>
                              </button>
                            ))}
                          </div>
                        )}
                      </div>

                      {/* Favorite Routes */}
                      <div>
                        <h3 className="text-lg font-bold mb-4 flex items-center space-x-2">
                          <Icon name="Star" size={20} />
                          <span>Favorite Routes</span>
                        </h3>
                        {favoriteRoutes.length === 0 ? (
                          <p className="text-gray-500 text-center py-6">No favorite routes yet</p>
                        ) : (
                          <div className="grid md:grid-cols-2 gap-4">
                            {favoriteRoutes.map((route) => (
                              <div
                                key={route.id}
                                className="bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg p-4 border border-yellow-200"
                              >
                                <div className="flex items-center justify-between">
                                  <div className="flex items-center space-x-2">
                                    <Icon name="Star" size={18} className="text-yellow-600 fill-yellow-400" />
                                    <span className="font-semibold text-lg">{route.from} → {route.to}</span>
                                  </div>
                                  <button
                                    onClick={() => {
                                      setSearchParams({
                                        ...searchParams,
                                        from: route.from,
                                        to: route.to
                                      });
                                      setActiveTab('search');
                                    }}
                                    className="text-blue-600 hover:text-blue-800"
                                  >
                                    <Icon name="Search" size={18} />
                                  </button>
                                </div>
                              </div>
                            ))}
                          </div>
                        )}
                      </div>
                    </div>
                  )}
                </div>

                {/* Premium Features */}
                <div className="bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl shadow-lg p-8 text-white">
                  <div className="flex items-center space-x-3 mb-4">
                    <Icon name="Sparkles" size={32} />
                    <h3 className="text-2xl font-bold">Upgrade to Premium</h3>
                  </div>
                  <p className="mb-6 opacity-90">Unlock exclusive features and save more on flights</p>
                  <div className="grid md:grid-cols-3 gap-4 mb-6">
                    <div className="bg-white/20 rounded-lg p-4 backdrop-blur">
                      <Icon name="Zap" size={24} className="mb-2" />
                      <p className="font-semibold">Instant Alerts</p>
                      <p className="text-sm opacity-90">Real-time price notifications</p>
                    </div>
                    <div className="bg-white/20 rounded-lg p-4 backdrop-blur">
                      <Icon name="TrendingDown" size={24} className="mb-2" />
                      <p className="font-semibold">Early Access</p>
                      <p className="text-sm opacity-90">See deals before anyone else</p>
                    </div>
                    <div className="bg-white/20 rounded-lg p-4 backdrop-blur">
                      <Icon name="X" size={24} className="mb-2" />
                      <p className="font-semibold">Ad-Free</p>
                      <p className="text-sm opacity-90">Clean, distraction-free experience</p>
                    </div>
                  </div>
                  <button className="bg-white text-purple-600 px-8 py-3 rounded-lg font-bold hover:bg-gray-100 transition">
                    Upgrade Now - $9.99/month
                  </button>
                </div>
              </div>
            )}
          </main>

          {/* Booking Modal */}
          {showBookingModal && selectedFlight && (
            <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
              <div className="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div className="p-6 border-b flex items-center justify-between">
                  <h3 className="text-2xl font-bold">Book Your Flight</h3>
                  <button
                    onClick={() => setShowBookingModal(false)}
                    className="p-2 hover:bg-gray-100 rounded-lg transition"
                  >
                    <Icon name="X" size={24} />
                  </button>
                </div>
                
                <div className="p-6">
                  {/* Flight Summary */}
                  <div className="bg-blue-50 rounded-xl p-6 mb-6">
                    <h4 className="font-bold text-lg mb-4">Flight Details</h4>
                    <div className="space-y-2 text-sm">
                      <p><span className="font-semibold">Route:</span> {searchParams.from} → {searchParams.to}</p>
                      <p><span className="font-semibold">Price:</span> ${selectedFlight.price.total} {selectedFlight.price.currency}</p>
                      <p><span className="font-semibold">Duration:</span> {formatDuration(selectedFlight.itineraries[0].duration)}</p>
                      <p><span className="font-semibold">Airline:</span> {selectedFlight.validatingAirlineCodes?.[0]}</p>
                    </div>
                  </div>

                  {/* Booking Partners */}
                  <h4 className="font-bold text-lg mb-4">Choose a Booking Partner</h4>
                  <p className="text-sm text-gray-600 mb-4">Select your preferred partner to complete your booking:</p>
                  
                  <div className="grid md:grid-cols-2 gap-4">
                    {bookingPartners.map((partner, index) => (
                      <a
                        key={index}
                        href={`${partner.url}?utm_source=skyscout&from=${searchParams.from}&to=${searchParams.to}`}
                        target="_blank"
                        rel="noopener noreferrer"
                        className="bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200 rounded-xl p-6 hover:border-blue-400 transition flex items-center justify-between group"
                      >
                        <div>
                          <p className="font-bold text-lg mb-1">{partner.name}</p>
                          <p className="text-sm text-gray-600">Complete booking on {partner.name}</p>
                        </div>
                        <Icon name="ExternalLink" size={24} className="text-blue-600 group-hover:translate-x-1 transition" />
                      </a>
                    ))}
                  </div>

                  <div className="mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                    <div className="flex items-start space-x-2">
                      <Icon name="Info" size={20} className="text-yellow-600 mt-0.5" />
                      <div className="text-sm text-gray-700">
                        <p className="font-semibold mb-1">Note:</p>
                        <p>You'll be redirected to our partner's website to complete your booking. Prices and availability may vary.</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Footer */}
          <footer className="bg-gray-900 text-white mt-16">
            <div className="max-w-7xl mx-auto px-4 py-12">
              <div className="grid md:grid-cols-4 gap-8 mb-8">
                <div>
                  <div className="flex items-center space-x-2 mb-4">
                    <div className="bg-gradient-to-br from-blue-600 to-purple-600 p-2 rounded-lg">
                      <Icon name="Plane" size={20} className="text-white" />
                    </div>
                    <h3 className="text-xl font-bold">SkyScout</h3>
                  </div>
                  <p className="text-gray-400 text-sm">Your trusted companion for finding the best flight deals worldwide.</p>
                </div>
                
                <div>
                  <h4 className="font-bold mb-4">Quick Links</h4>
                  <ul className="space-y-2 text-sm text-gray-400">
                    <li><a href="#" className="hover:text-white transition">About Us</a></li>
                    <li><a href="#" className="hover:text-white transition">How It Works</a></li>
                    <li><a href="#" className="hover:text-white transition">FAQ</a></li>
                    <li><a href="#" className="hover:text-white transition">Contact</a></li>
                  </ul>
                </div>
                
                <div>
                  <h4 className="font-bold mb-4">Legal</h4>
                  <ul className="space-y-2 text-sm text-gray-400">
                    <li><a href="#" className="hover:text-white transition">Privacy Policy</a></li>
                    <li><a href="#" className="hover:text-white transition">Terms of Service</a></li>
                    <li><a href="#" className="hover:text-white transition">Cookie Policy</a></li>
                  </ul>
                </div>
                
                <div>
                  <h4 className="font-bold mb-4">Follow Us</h4>
                  <p className="text-gray-400 text-sm mb-4">Stay updated with the latest deals</p>
                  <div className="flex space-x-3">
                    <a href="#" className="bg-gray-800 p-2 rounded-lg hover:bg-gray-700 transition">
                      <Icon name="Globe" size={20} />
                    </a>
                    <a href="#" className="bg-gray-800 p-2 rounded-lg hover:bg-gray-700 transition">
                      <Icon name="Sparkles" size={20} />
                    </a>
                  </div>
                </div>
              </div>
              
              <div className="border-t border-gray-800 pt-8 text-center text-sm text-gray-400">
                <p>© 2024 SkyScout. All rights reserved. Powered by Amadeus API.</p>
                <p className="mt-2">Not affiliated with airlines. Prices shown are indicative and may vary.</p>
              </div>
            </div>
          </footer>
        </div>
      );
    };

    ReactDOM.render(<SkyScout />, document.getElementById('root'));
  </script>
</body>
</html>
