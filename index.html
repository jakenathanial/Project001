<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>dubai2usa - Professional Flight Search</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Sign-In -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <!-- EmailJS for email sending -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    
    * {
      font-family: 'Inter', sans-serif;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .flight-card {
      transition: all 0.3s ease;
    }
    
    .flight-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .animate-pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    .modal-overlay {
      backdrop-filter: blur(4px);
    }

    .stripe-card {
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 12px;
      background: white;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    // Lucide Icons as SVG components
    const Icon = ({ name, size = 24, className = "", ...props }) => {
      const icons = {
        Search: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>,
        TrendingDown: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline></svg>,
        Bell: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path></svg>,
        Calendar: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg>,
        Users: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>,
        Plane: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"></path></svg>,
        Clock: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>,
        DollarSign: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="12" x2="12" y1="2" y2="22"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>,
        MapPin: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></svg>,
        Menu: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg>,
        X: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>,
        Star: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>,
        Filter: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>,
        ArrowRight: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg>,
        Sparkles: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path><path d="M5 3v4"></path><path d="M19 17v4"></path><path d="M3 5h4"></path><path d="M17 19h4"></path></svg>,
        BarChart3: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 3v18h18"></path><path d="M18 17V9"></path><path d="M13 17V5"></path><path d="M8 17v-3"></path></svg>,
        Globe: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><line x1="2" x2="22" y1="12" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>,
        Sun: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>,
        Info: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg>,
        ChevronDown: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m6 9 6 6 6-6"></path></svg>,
        Trash2: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>,
        ExternalLink: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg>,
        Zap: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>,
        TrendingUp: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>,
        Cloud: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"></path></svg>,
        Repeat: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m17 2 4 4-4 4"></path><path d="M3 11v-1a4 4 0 0 1 4-4h14"></path><path d="m7 22-4-4 4-4"></path><path d="M21 13v1a4 4 0 0 1-4 4H3"></path></svg>,
        Mail: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>,
        Lock: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>,
        CreditCard: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="20" height="14" x="2" y="5" rx="2"></rect><line x1="2" x2="22" y1="10" y2="10"></line></svg>,
        Check: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"></polyline></svg>,
        AlertCircle: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><line x1="12" x2="12" y1="8" y2="12"></line><line x1="12" x2="12.01" y1="16" y2="16"></line></svg>,
      };
      return icons[name] || null;
    };

    // UAE and USA Airport Codes
    const UAE_AIRPORTS = ['DXB', 'AUH', 'SHJ', 'RKT', 'AAN', 'DWC', 'AJM'];
    const USA_AIRPORTS = ['JFK', 'LAX', 'ORD', 'DFW', 'DEN', 'ATL', 'SFO', 'SEA', 'LAS', 'MCO', 'EWR', 'CLT', 'PHX', 'IAH', 'MIA', 'BOS', 'MSP', 'DTW', 'PHL', 'LGA', 'FLL', 'BWI', 'DCA', 'MDW', 'SLC', 'SAN', 'IAD', 'TPA', 'PDX', 'STL'];

    const SkyScout = () => {
      const [activeTab, setActiveTab] = useState('search');
      const [tripType, setTripType] = useState('round-trip');
      const [searchParams, setSearchParams] = useState({
        from: '',
        to: '',
        departDate: '',
        returnDate: '',
        passengers: 1,
        class: 'ECONOMY'
      });
      const [flights, setFlights] = useState([]);
      const [loading, setLoading] = useState(false);
      const [error, setError] = useState('');
      const [accessToken, setAccessToken] = useState('');
      const [sortBy, setSortBy] = useState('price');
      const [priceAlerts, setPriceAlerts] = useState([]);
      const [savedSearches, setSavedSearches] = useState([]);
      const [favoriteRoutes, setFavoriteRoutes] = useState([]);
      const [airportSuggestions, setAirportSuggestions] = useState([]);
      const [showSuggestions, setShowSuggestions] = useState({ from: false, to: false });
      const [flexibleDates, setFlexibleDates] = useState([]);
      const [showMobileMenu, setShowMobileMenu] = useState(false);
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [username, setUsername] = useState('');
      const [userEmail, setUserEmail] = useState('');
      const [emailVerified, setEmailVerified] = useState(false);
      const [isPremium, setIsPremium] = useState(false);
      const [currencyConverter, setCurrencyConverter] = useState({ from: 'USD', to: 'EUR', amount: 100, result: 0 });
      const [selectedFlight, setSelectedFlight] = useState(null);
      const [showBookingModal, setShowBookingModal] = useState(false);
      const [showAuthModal, setShowAuthModal] = useState(false);
      const [showSubscribeModal, setShowSubscribeModal] = useState(false);
      const [authMode, setAuthMode] = useState('signin'); // 'signin' or 'signup'
      const [authForm, setAuthForm] = useState({ email: '', password: '', username: '' });
      const [verificationCode, setVerificationCode] = useState('');
      const [showVerificationModal, setShowVerificationModal] = useState(false);
      const [paymentMethod, setPaymentMethod] = useState('card'); // 'card', 'paypal', 'crypto'
      const [cardDetails, setCardDetails] = useState({ number: '', expiry: '', cvc: '', name: '' });

      const API_KEY = '5VMWyRgkMAmC6zlTYDcYYyU1wAg8Xz7T';
      const API_SECRET = 'IzGkoG0NaYJum5iU';

      // Initialize EmailJS (You need to sign up at emailjs.com and get your keys)
      useEffect(() => {
        if (typeof emailjs !== 'undefined') {
          emailjs.init("service_u3nvivi"); // Replace with your EmailJS public key
        }
      }, []);

      // Get Amadeus access token
      const getAccessToken = async () => {
        try {
          const response = await fetch('https://test.api.amadeus.com/v1/security/oauth2/token', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `grant_type=client_credentials&client_id=${API_KEY}&client_secret=${API_SECRET}`
          });
          
          const data = await response.json();
          if (data.access_token) {
            setAccessToken(data.access_token);
            return data.access_token;
          }
        } catch (err) {
          setError('Failed to authenticate with Amadeus API');
          console.error(err);
        }
      };

      useEffect(() => {
        getAccessToken();
        loadUserData();
      }, []);

      const loadUserData = () => {
        const stored = {
          alerts: JSON.parse(localStorage.getItem('priceAlerts') || '[]'),
          searches: JSON.parse(localStorage.getItem('savedSearches') || '[]'),
          favorites: JSON.parse(localStorage.getItem('favoriteRoutes') || '[]'),
          user: localStorage.getItem('username'),
          email: localStorage.getItem('userEmail'),
          verified: localStorage.getItem('emailVerified') === 'true',
          premium: localStorage.getItem('isPremium') === 'true'
        };
        
        setPriceAlerts(stored.alerts);
        setSavedSearches(stored.searches);
        setFavoriteRoutes(stored.favorites);
        setIsPremium(stored.premium);
        if (stored.user) {
          setIsLoggedIn(true);
          setUsername(stored.user);
          setUserEmail(stored.email || '');
          setEmailVerified(stored.verified);
        }
      };

      // Send verification email
      const sendVerificationEmail = async (email, code) => {
        try {
          // In production, use EmailJS or your backend to send emails
          const templateParams = {
            to_email: email,
            verification_code: code,
            user_name: authForm.username
          };

          // Mock email sending for demo
          console.log('Verification email sent to:', email, 'Code:', code);
          alert(`Verification code sent to ${email}! For demo purposes, your code is: ${code}`);
          
          // Uncomment when you have EmailJS configured:
          // await emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', templateParams);
        } catch (error) {
          console.error('Failed to send verification email:', error);
        }
      };

      // Handle Google Sign-In
      const handleGoogleSignIn = () => {
        // In production, implement Google OAuth flow
        alert('Google Sign-In: In production, this would open Google OAuth flow. For demo, please use email signup.');
      };

      // Handle Email Signup
      const handleEmailSignup = async () => {
        if (!authForm.email || !authForm.password || !authForm.username) {
          setError('Please fill in all fields');
          return;
        }

        if (!authForm.email.includes('@gmail.com')) {
          setError('Please use a Gmail address');
          return;
        }

        if (authForm.password.length < 8) {
          setError('Password must be at least 8 characters');
          return;
        }

        // Generate verification code
        const code = Math.floor(100000 + Math.random() * 900000).toString();
        
        // Store temporary user data
        localStorage.setItem('tempUser', JSON.stringify({
          email: authForm.email,
          username: authForm.username,
          password: authForm.password,
          verificationCode: code
        }));

        // Send verification email
        await sendVerificationEmail(authForm.email, code);

        setShowAuthModal(false);
        setShowVerificationModal(true);
      };

      // Handle Email Sign In
      const handleEmailSignIn = () => {
        const storedUser = localStorage.getItem('username');
        const storedEmail = localStorage.getItem('userEmail');
        const storedPassword = localStorage.getItem('userPassword');

        if (storedEmail === authForm.email && storedPassword === authForm.password) {
          setIsLoggedIn(true);
          setUsername(storedUser);
          setUserEmail(storedEmail);
          setEmailVerified(localStorage.getItem('emailVerified') === 'true');
          setShowAuthModal(false);
        } else {
          setError('Invalid email or password');
        }
      };

      // Verify Email Code
      const handleVerifyEmail = () => {
        const tempUser = JSON.parse(localStorage.getItem('tempUser') || '{}');

        if (verificationCode === tempUser.verificationCode) {
          // Save user data
          localStorage.setItem('username', tempUser.username);
          localStorage.setItem('userEmail', tempUser.email);
          localStorage.setItem('userPassword', tempUser.password);
          localStorage.setItem('emailVerified', 'true');
          localStorage.setItem('isPremium', 'false');
          localStorage.removeItem('tempUser');

          setIsLoggedIn(true);
          setUsername(tempUser.username);
          setUserEmail(tempUser.email);
          setEmailVerified(true);
          setShowVerificationModal(false);

          alert('Email verified successfully! Welcome to SkyScout.');
        } else {
          setError('Invalid verification code');
        }
      };

      // Check if route is allowed for free tier
      const isRouteAllowed = (from, to) => {
        if (isPremium) return true;
        
        const fromAllowed = UAE_AIRPORTS.includes(from) || USA_AIRPORTS.includes(from);
        const toAllowed = UAE_AIRPORTS.includes(to) || USA_AIRPORTS.includes(to);
        
        return fromAllowed && toAllowed;
      };

      const searchAirports = async (query, field) => {
        if (!query || query.length < 2) {
          setAirportSuggestions([]);
          return;
        }

        try {
          const token = accessToken || await getAccessToken();
          const response = await fetch(
            `https://test.api.amadeus.com/v1/reference-data/locations?subType=AIRPORT&keyword=${query}&page[limit]=10`,
            {
              headers: {
                'Authorization': `Bearer ${token}`
              }
            }
          );

          const data = await response.json();
          if (data.data) {
            // Filter suggestions based on subscription
            let filtered = data.data;
            if (!isPremium) {
              filtered = data.data.filter(airport => 
                UAE_AIRPORTS.includes(airport.iataCode) || USA_AIRPORTS.includes(airport.iataCode)
              );
            }
            setAirportSuggestions(filtered);
            setShowSuggestions({ ...showSuggestions, [field]: true });
          }
        } catch (err) {
          console.error('Airport search error:', err);
        }
      };

      const searchFlights = async () => {
        if (!isLoggedIn) {
          setError('Please sign in to search flights');
          setShowAuthModal(true);
          return;
        }

        if (!emailVerified) {
          setError('Please verify your email address first');
          setShowVerificationModal(true);
          return;
        }

        if (!searchParams.from || !searchParams.to || !searchParams.departDate) {
          setError('Please fill in all required fields');
          return;
        }

        // Check if route is allowed
        if (!isRouteAllowed(searchParams.from, searchParams.to)) {
          setError('Free accounts can only search UAE â†” USA flights. Upgrade to Premium for worldwide access!');
          setTimeout(() => setShowSubscribeModal(true), 2000);
          return;
        }

        setLoading(true);
        setError('');

        try {
          const token = accessToken || await getAccessToken();
          let url = `https://test.api.amadeus.com/v2/shopping/flight-offers?originLocationCode=${searchParams.from}&destinationLocationCode=${searchParams.to}&departureDate=${searchParams.departDate}&adults=${searchParams.passengers}&travelClass=${searchParams.class}&max=50`;
          
          if (tripType === 'round-trip' && searchParams.returnDate) {
            url += `&returnDate=${searchParams.returnDate}`;
          }

          const response = await fetch(url, {
            headers: {
              'Authorization': `Bearer ${token}`
            }
          });

          const data = await response.json();
          
          if (data.data && data.data.length > 0) {
            setFlights(data.data);
            saveSearch();
            generateFlexibleDates();
          } else {
            setError('No flights found for this route');
            setFlights([]);
          }
        } catch (err) {
          setError('Failed to search flights. Please try again.');
          console.error(err);
        } finally {
          setLoading(false);
        }
      };

      const generateFlexibleDates = () => {
        const dates = [];
        const baseDate = new Date(searchParams.departDate);
        
        for (let i = -3; i <= 3; i++) {
          const date = new Date(baseDate);
          date.setDate(baseDate.getDate() + i);
          dates.push({
            date: date.toISOString().split('T')[0],
            offset: i,
            price: Math.floor(Math.random() * 200) + 300
          });
        }
        
        setFlexibleDates(dates);
      };

      const saveSearch = () => {
        const search = {
          from: searchParams.from,
          to: searchParams.to,
          date: searchParams.departDate,
          timestamp: new Date().toISOString()
        };
        
        const updated = [search, ...savedSearches.slice(0, 9)];
        setSavedSearches(updated);
        localStorage.setItem('savedSearches', JSON.stringify(updated));
      };

      const addPriceAlert = (flight) => {
        if (!isPremium) {
          setError('Price alerts are a Premium feature!');
          setTimeout(() => setShowSubscribeModal(true), 1500);
          return;
        }

        const alert = {
          id: Date.now(),
          route: `${searchParams.from} â†’ ${searchParams.to}`,
          price: parseFloat(flight.price.total),
          date: searchParams.departDate,
          created: new Date().toISOString(),
          active: true
        };
        
        const updated = [...priceAlerts, alert];
        setPriceAlerts(updated);
        localStorage.setItem('priceAlerts', JSON.stringify(updated));
      };

      const deletePriceAlert = (id) => {
        const updated = priceAlerts.filter(alert => alert.id !== id);
        setPriceAlerts(updated);
        localStorage.setItem('priceAlerts', JSON.stringify(updated));
      };

      const toggleFavorite = () => {
        const route = {
          from: searchParams.from,
          to: searchParams.to,
          id: `${searchParams.from}-${searchParams.to}`
        };
        
        const exists = favoriteRoutes.find(r => r.id === route.id);
        let updated;
        
        if (exists) {
          updated = favoriteRoutes.filter(r => r.id !== route.id);
        } else {
          updated = [...favoriteRoutes, route];
        }
        
        setFavoriteRoutes(updated);
        localStorage.setItem('favoriteRoutes', JSON.stringify(updated));
      };

      const isFavorite = useMemo(() => {
        return favoriteRoutes.some(r => r.id === `${searchParams.from}-${searchParams.to}`);
      }, [favoriteRoutes, searchParams.from, searchParams.to]);

      const sortedFlights = useMemo(() => {
        if (!flights.length) return [];
        
        return [...flights].sort((a, b) => {
          switch (sortBy) {
            case 'price':
              return parseFloat(a.price.total) - parseFloat(b.price.total);
            case 'duration':
              const durationA = a.itineraries[0].duration.replace('PT', '').replace('H', '.').replace('M', '');
              const durationB = b.itineraries[0].duration.replace('PT', '').replace('H', '.').replace('M', '');
              return parseFloat(durationA) - parseFloat(durationB);
            case 'best':
              const scoreA = parseFloat(a.price.total) / parseFloat(a.itineraries[0].duration.replace('PT', '').replace('H', '.').replace('M', ''));
              const scoreB = parseFloat(b.price.total) / parseFloat(b.itineraries[0].duration.replace('PT', '').replace('H', '.').replace('M', ''));
              return scoreA - scoreB;
            default:
              return 0;
          }
        });
      }, [flights, sortBy]);

      const cheapestFlight = useMemo(() => {
        if (!flights.length) return null;
        return flights.reduce((min, flight) => 
          parseFloat(flight.price.total) < parseFloat(min.price.total) ? flight : min
        );
      }, [flights]);

      const formatDuration = (duration) => {
        const hours = duration.match(/(\d+)H/)?.[1] || '0';
        const minutes = duration.match(/(\d+)M/)?.[1] || '0';
        return `${hours}h ${minutes}m`;
      };

      const formatTime = (dateTime) => {
        return new Date(dateTime).toLocaleTimeString('en-US', { 
          hour: '2-digit', 
          minute: '2-digit',
          hour12: true 
        });
      };

      const handleLogout = () => {
        setIsLoggedIn(false);
        setUsername('');
        setUserEmail('');
        setEmailVerified(false);
      };

      const convertCurrency = () => {
        const rates = {
          'USD-EUR': 0.92,
          'EUR-USD': 1.09,
          'USD-GBP': 0.79,
          'GBP-USD': 1.27,
          'USD-JPY': 149.50,
          'JPY-USD': 0.0067
        };
        const rate = rates[`${currencyConverter.from}-${currencyConverter.to}`] || 1;
        setCurrencyConverter({
          ...currencyConverter,
          result: (currencyConverter.amount * rate).toFixed(2)
        });
      };

      const handleBookFlight = (flight) => {
        setSelectedFlight(flight);
        setShowBookingModal(true);
      };

      // Handle Subscription Payment
      const handleSubscribe = () => {
        // Validate payment details
        if (paymentMethod === 'card') {
          if (!cardDetails.number || !cardDetails.expiry || !cardDetails.cvc || !cardDetails.name) {
            setError('Please fill in all card details');
            return;
          }
        }

        // In production, integrate with Stripe, PayPal, etc.
        // For demo, just activate premium
        localStorage.setItem('isPremium', 'true');
        setIsPremium(true);
        setShowSubscribeModal(false);
        alert('ðŸŽ‰ Congratulations! You are now a Premium member. Enjoy worldwide flight search!');
      };

      const bookingPartners = [
        { name: 'Expedia', url: 'https://www.expedia.com' },
        { name: 'Kayak', url: 'https://www.kayak.com' },
        { name: 'Skyscanner', url: 'https://www.skyscanner.com' },
        { name: 'Google Flights', url: 'https://www.google.com/flights' }
      ];

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50">
          {/* Header */}
          <header className="bg-white shadow-sm border-b sticky top-0 z-50">
            <div className="max-w-7xl mx-auto px-4 py-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-2">
                  <div className="bg-gradient-to-br from-blue-600 to-purple-600 p-2 rounded-lg">
                    <Icon name="Plane" size={24} className="text-white" />
                  </div>
                  <div>
                    <h1 className="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                      SkyScout
                    </h1>
                    <p className="text-xs text-gray-500">Find Your Perfect Flight</p>
                  </div>
                </div>

                {/* Desktop Navigation */}
                <nav className="hidden md:flex items-center space-x-6">
                  <button
                    onClick={() => setActiveTab('search')}
                    className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition ${
                      activeTab === 'search' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-100'
                    }`}
                  >
                    <Icon name="Search" size={18} />
                    <span>Search</span>
                  </button>
                  <button
                    onClick={() => setActiveTab('deals')}
                    className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition ${
                      activeTab === 'deals' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-100'
                    }`}
                  >
                    <Icon name="TrendingDown" size={18} />
                    <span>Deals</span>
                  </button>
                  <button
                    onClick={() => setActiveTab('alerts')}
                    className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition relative ${
                      activeTab === 'alerts' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-100'
                    }`}
                  >
                    <Icon name="Bell" size={18} />
                    <span>Alerts</span>
                    {priceAlerts.length > 0 && (
                      <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
                        {priceAlerts.length}
                      </span>
                    )}
                  </button>
                  <button
                    onClick={() => setActiveTab('tools')}
                    className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition ${
                      activeTab === 'tools' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-100'
                    }`}
                  >
                    <Icon name="Globe" size={18} />
                    <span>Tools</span>
                  </button>
                  {isLoggedIn ? (
                    <div className="flex items-center space-x-3">
                      {isPremium && (
                        <span className="bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center space-x-1">
                          <Icon name="Sparkles" size={14} />
                          <span>Premium</span>
                        </span>
                      )}
                      <button
                        onClick={() => setActiveTab('profile')}
                        className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition ${
                          activeTab === 'profile' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-100'
                        }`}
                      >
                        <Icon name="Users" size={18} />
                        <span>{username}</span>
                      </button>
                    </div>
                  ) : (
                    <button
                      onClick={() => setShowAuthModal(true)}
                      className="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition"
                    >
                      Sign In
                    </button>
                  )}
                </nav>

                {/* Mobile Menu Button */}
                <button
                  className="md:hidden p-2 hover:bg-gray-100 rounded-lg"
                  onClick={() => setShowMobileMenu(!showMobileMenu)}
                >
                  {showMobileMenu ? <Icon name="X" size={24} /> : <Icon name="Menu" size={24} />}
                </button>
              </div>

              {/* Mobile Menu */}
              {showMobileMenu && (
                <nav className="md:hidden mt-4 space-y-2 pb-4">
                  <button
                    onClick={() => { setActiveTab('search'); setShowMobileMenu(false); }}
                    className="w-full flex items-center space-x-2 px-4 py-2 rounded-lg bg-gray-50 hover:bg-gray-100"
                  >
                    <Icon name="Search" size={18} />
                    <span>Search</span>
                  </button>
                  <button
                    onClick={() => { setActiveTab('deals'); setShowMobileMenu(false); }}
                    className="w-full flex items-center space-x-2 px-4 py-2 rounded-lg bg-gray-50 hover:bg-gray-100"
                  >
                    <Icon name="TrendingDown" size={18} />
                    <span>Deals</span>
                  </button>
                  <button
                    onClick={() => { setActiveTab('alerts'); setShowMobileMenu(false); }}
                    className="w-full flex items-center space-x-2 px-4 py-2 rounded-lg bg-gray-50 hover:bg-gray-100"
                  >
                    <Icon name="Bell" size={18} />
                    <span>Alerts ({priceAlerts.length})</span>
                  </button>
                  <button
                    onClick={() => { setActiveTab('tools'); setShowMobileMenu(false); }}
                    className="w-full flex items-center space-x-2 px-4 py-2 rounded-lg bg-gray-50 hover:bg-gray-100"
                  >
                    <Icon name="Globe" size={18} />
                    <span>Tools</span>
                  </button>
                  {isLoggedIn ? (
                    <button
                      onClick={() => { setActiveTab('profile'); setShowMobileMenu(false); }}
                      className="w-full flex items-center space-x-2 px-4 py-2 rounded-lg bg-gray-50 hover:bg-gray-100"
                    >
                      <Icon name="Users" size={18} />
                      <span>{username}</span>
                    </button>
                  ) : (
                    <button
                      onClick={() => { setShowAuthModal(true); setShowMobileMenu(false); }}
                      className="w-full flex items-center space-x-2 px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700"
                    >
                      <Icon name="Users" size={18} />
                      <span>Sign In</span>
                    </button>
                  )}
                </nav>
              )}
            </div>

            {/* Free Tier Notice */}
            {isLoggedIn && !isPremium && (
              <div className="bg-gradient-to-r from-yellow-50 to-orange-50 border-t border-yellow-200">
                <div className="max-w-7xl mx-auto px-4 py-2">
                  <div className="flex items-center justify-between text-sm">
                    <div className="flex items-center space-x-2 text-gray-700">
                      <Icon name="Info" size={16} className="text-orange-600" />
                      <span>Free account: UAE â†” USA flights only. Upgrade for worldwide access!</span>
                    </div>
                    <button
                      onClick={() => setShowSubscribeModal(true)}
                      className="bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-1 rounded-full text-xs font-bold hover:from-purple-700 hover:to-blue-700 transition"
                    >
                      Upgrade Now
                    </button>
                  </div>
                </div>
              </div>
            )}
          </header>

          <main className="max-w-7xl mx-auto px-4 py-8">
            {/* Search Tab */}
            {activeTab === 'search' && (
              <div className="space-y-6">
                {/* Search Form */}
                <div className="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                  <div className="flex items-center justify-between mb-6">
                    <h2 className="text-2xl font-bold text-gray-800">Find Your Flight</h2>
                    {searchParams.from && searchParams.to && (
                      <button
                        onClick={toggleFavorite}
                        className="p-2 rounded-full hover:bg-gray-100 transition"
                      >
                        <Icon name="Star" size={20} className={isFavorite ? 'fill-yellow-400 text-yellow-400' : 'text-gray-400'} />
                      </button>
                    )}
                  </div>

                  {!isPremium && (
                    <div className="mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
                      <div className="flex items-start space-x-2">
                        <Icon name="Info" size={20} className="text-blue-600 mt-0.5" />
                        <div className="text-sm text-gray-700">
                          <p className="font-semibold mb-1">Free Account Limitations:</p>
                          <p>You can search flights between UAE ({UAE_AIRPORTS.slice(0, 3).join(', ')}, etc.) and USA ({USA_AIRPORTS.slice(0, 5).join(', ')}, etc.) only.</p>
                          <p className="mt-1">
                            <button onClick={() => setShowSubscribeModal(true)} className="text-blue-600 font-semibold hover:underline">
                              Upgrade to Premium
                            </button> for worldwide flight search!
                          </p>
                        </div>
                      </div>
                    </div>
                  )}

                  {/* Trip Type */}
                  <div className="flex space-x-4 mb-6">
                    <button
                      onClick={() => setTripType('round-trip')}
                      className={`px-6 py-2 rounded-lg font-medium transition ${
                        tripType === 'round-trip'
                          ? 'bg-blue-600 text-white'
                          : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                      }`}
                    >
                      Round Trip
                    </button>
                    <button
                      onClick={() => setTripType('one-way')}
                      className={`px-6 py-2 rounded-lg font-medium transition ${
                        tripType === 'one-way'
                          ? 'bg-blue-600 text-white'
                          : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                      }`}
                    >
                      One Way
                    </button>
                  </div>

                  {/* Search Fields */}
                  <div className="grid md:grid-cols-2 gap-4 mb-4">
                    {/* From */}
                    <div className="relative">
                      <label className="block text-sm font-medium text-gray-700 mb-2">From</label>
                      <div className="relative">
                        <Icon name="MapPin" size={20} className="absolute left-3 top-3 text-gray-400" />
                        <input
                          type="text"
                          placeholder="Airport code (e.g., DXB, JFK)"
                          value={searchParams.from}
                          onChange={(e) => {
                            setSearchParams({ ...searchParams, from: e.target.value.toUpperCase() });
                            searchAirports(e.target.value, 'from');
                          }}
                          className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                      </div>
                      {showSuggestions.from && airportSuggestions.length > 0 && (
                        <div className="absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto">
                          {airportSuggestions.map((airport) => (
                            <button
                              key={airport.id}
                              onClick={() => {
                                setSearchParams({ ...searchParams, from: airport.iataCode });
                                setShowSuggestions({ ...showSuggestions, from: false });
                              }}
                              className="w-full px-4 py-3 text-left hover:bg-blue-50 border-b last:border-b-0"
                            >
                              <div className="font-medium">{airport.iataCode} - {airport.name}</div>
                              <div className="text-sm text-gray-500">{airport.address?.cityName}, {airport.address?.countryName}</div>
                            </button>
                          ))}
                        </div>
                      )}
                    </div>

                    {/* To */}
                    <div className="relative">
                      <label className="block text-sm font-medium text-gray-700 mb-2">To</label>
                      <div className="relative">
                        <Icon name="MapPin" size={20} className="absolute left-3 top-3 text-gray-400" />
                        <input
                          type="text"
                          placeholder="Airport code (e.g., LAX, AUH)"
                          value={searchParams.to}
                          onChange={(e) => {
                            setSearchParams({ ...searchParams, to: e.target.value.toUpperCase() });
                            searchAirports(e.target.value, 'to');
                          }}
                          className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                      </div>
                      {showSuggestions.to && airportSuggestions.length > 0 && (
                        <div className="absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto">
                          {airportSuggestions.map((airport) => (
                            <button
                              key={airport.id}
                              onClick={() => {
                                setSearchParams({ ...searchParams, to: airport.iataCode });
                                setShowSuggestions({ ...showSuggestions, to: false });
                              }}
                              className="w-full px-4 py-3 text-left hover:bg-blue-50 border-b last:border-b-0"
                            >
                              <div className="font-medium">{airport.iataCode} - {airport.name}</div>
                              <div className="text-sm text-gray-500">{airport.address?.cityName}, {airport.address?.countryName}</div>
                            </button>
                          ))}
                        </div>
                      )}
                    </div>

                    {/* Depart Date */}
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Departure</label>
                      <div className="relative">
                        <Icon name="Calendar" size={20} className="absolute left-3 top-3 text-gray-400" />
                        <input
                          type="date"
                          value={searchParams.departDate}
                          onChange={(e) => setSearchParams({ ...searchParams, departDate: e.target.value })}
                          min={new Date().toISOString().split('T')[0]}
                          className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                      </div>
                    </div>

                    {/* Return Date */}
                    {tripType === 'round-trip' && (
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Return</label>
                        <div className="relative">
                          <Icon name="Calendar" size={20} className="absolute left-3 top-3 text-gray-400" />
                          <input
                            type="date"
                            value={searchParams.returnDate}
                            onChange={(e) => setSearchParams({ ...searchParams, returnDate: e.target.value })}
                            min={searchParams.departDate || new Date().toISOString().split('T')[0]}
                            className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                      </div>
                    )}

                    {/* Passengers */}
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Passengers</label>
                      <div className="relative">
                        <Icon name="Users" size={20} className="absolute left-3 top-3 text-gray-400" />
                        <select
                          value={searchParams.passengers}
                          onChange={(e) => setSearchParams({ ...searchParams, passengers: parseInt(e.target.value) })}
                          className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none"
                        >
                          {[1,2,3,4,5,6,7,8,9].map(n => (
                            <option key={n} value={n}>{n} {n === 1 ? 'Adult' : 'Adults'}</option>
                          ))}
                        </select>
                      </div>
                    </div>

                    {/* Class */}
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Class</label>
                      <select
                        value={searchParams.class}
                        onChange={(e) => setSearchParams({ ...searchParams, class: e.target.value })}
                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      >
                        <option value="ECONOMY">Economy</option>
                        <option value="PREMIUM_ECONOMY">Premium Economy</option>
                        <option value="BUSINESS">Business</option>
                        <option value="FIRST">First Class</option>
                      </select>
                    </div>
                  </div>

                  <button
                    onClick={searchFlights}
                    disabled={loading}
                    className="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition flex items-center justify-center space-x-2 disabled:opacity-50"
                  >
                    {loading ? (
                      <>
                        <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white"></div>
                        <span>Searching...</span>
                      </>
                    ) : (
                      <>
                        <Icon name="Search" size={20} />
                        <span>Search Flights</span>
                      </>
                    )}
                  </button>

                  {error && (
                    <div className="mt-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600 flex items-start space-x-2">
                      <Icon name="AlertCircle" size={20} className="mt-0.5" />
                      <span>{error}</span>
                    </div>
                  )}
                </div>

                {/* Flexible Dates */}
                {flexibleDates.length > 0 && (
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <h3 className="text-lg font-bold mb-4 flex items-center space-x-2">
                      <Icon name="Calendar" size={20} className="text-blue-600" />
                      <span>Flexible Dates (Â±3 Days)</span>
                    </h3>
                    <div className="grid grid-cols-2 md:grid-cols-7 gap-2">
                      {flexibleDates.map((date) => (
                        <button
                          key={date.date}
                          onClick={() => setSearchParams({ ...searchParams, departDate: date.date })}
                          className={`p-3 rounded-lg border transition ${
                            date.date === searchParams.departDate
                              ? 'border-blue-600 bg-blue-50'
                              : 'border-gray-200 hover:border-blue-300'
                          }`}
                        >
                          <div className="text-xs text-gray-500">
                            {date.offset === 0 ? 'Today' : `${date.offset > 0 ? '+' : ''}${date.offset}d`}
                          </div>
                          <div className="text-sm font-medium">{new Date(date.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</div>
                          <div className="text-xs font-bold text-green-600">${date.price}</div>
                        </button>
                      ))}
                    </div>
                  </div>
                )}

                {/* Results */}
                {flights.length > 0 && (
                  <div className="space-y-4">
                    {/* Sorting and Filters */}
                    <div className="bg-white rounded-xl shadow-lg p-4 flex flex-wrap items-center justify-between gap-4">
                      <div className="flex items-center space-x-2">
                        <Icon name="Filter" size={20} className="text-gray-600" />
                        <span className="font-medium text-gray-700">{flights.length} flights found</span>
                      </div>
                      
                      <div className="flex items-center space-x-2">
                        <span className="text-sm text-gray-600">Sort by:</span>
                        <select
                          value={sortBy}
                          onChange={(e) => setSortBy(e.target.value)}
                          className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                        >
                          <option value="price">Lowest Price</option>
                          <option value="duration">Shortest Duration</option>
                          <option value="best">Best Value</option>
                        </select>
                      </div>
                    </div>

                    {/* Cheapest Flight Banner */}
                    {cheapestFlight && sortBy === 'price' && (
                      <div className="bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl shadow-lg p-6 text-white">
                        <div className="flex items-center space-x-2 mb-2">
                          <Icon name="Sparkles" size={24} />
                          <h3 className="text-xl font-bold">Cheapest Flight Found!</h3>
                        </div>
                        <div className="flex items-center justify-between">
                          <div>
                            <p className="text-3xl font-bold">${cheapestFlight.price.total}</p>
                            <p className="text-sm opacity-90">{cheapestFlight.validatingAirlineCodes?.[0] || 'Airline'}</p>
                          </div>
                          <div className="text-right">
                            <p className="text-sm opacity-90">Duration</p>
                            <p className="font-semibold">{formatDuration(cheapestFlight.itineraries[0].duration)}</p>
                          </div>
                        </div>
                      </div>
                    )}

                    {/* Flight Cards */}
                    {sortedFlights.map((flight, index) => (
                      <div key={index} className="flight-card bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition">
                        <div className="flex flex-col md:flex-row md:items-center justify-between gap-4">
                          <div className="flex-1">
                            <div className="flex items-center justify-between mb-4">
                              <div>
                                <p className="text-2xl font-bold text-gray-800">{searchParams.from} â†’ {searchParams.to}</p>
                                <p className="text-sm text-gray-500">
                                  {flight.validatingAirlineCodes?.[0] || 'Airline'} â€¢ {flight.itineraries[0].segments.length === 1 ? 'Non-stop' : `${flight.itineraries[0].segments.length - 1} stop(s)`}
                                </p>
                              </div>
                              {index === 0 && sortBy === 'price' && (
                                <span className="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-semibold">
                                  Best Deal
                                </span>
                              )}
                            </div>

                            <div className="grid md:grid-cols-3 gap-4 mb-4">
                              <div className="flex items-center space-x-2">
                                <Icon name="Clock" size={18} className="text-blue-600" />
                                <div>
                                  <p className="text-xs text-gray-500">Duration</p>
                                  <p className="font-semibold">{formatDuration(flight.itineraries[0].duration)}</p>
                                </div>
                              </div>

                              <div className="flex items-center space-x-2">
                                <Icon name="Plane" size={18} className="text-blue-600" />
                                <div>
                                  <p className="text-xs text-gray-500">Departure</p>
                                  <p className="font-semibold">{formatTime(flight.itineraries[0].segments[0].departure.at)}</p>
                                </div>
                              </div>

                              <div className="flex items-center space-x-2">
                                <Icon name="Plane" size={18} className="text-blue-600" />
                                <div>
                                  <p className="text-xs text-gray-500">Arrival</p>
                                  <p className="font-semibold">
                                    {formatTime(flight.itineraries[0].segments[flight.itineraries[0].segments.length - 1].arrival.at)}
                                  </p>
                                </div>
                              </div>
                            </div>

                            {/* Segments */}
                            <div className="bg-gray-50 rounded-lg p-3 space-y-2">
                              {flight.itineraries[0].segments.map((segment, segIndex) => (
                                <div key={segIndex} className="text-sm text-gray-600 flex items-center space-x-2">
                                  <Icon name="ArrowRight" size={14} />
                                  <span>
                                    {segment.departure.iataCode} â†’ {segment.arrival.iataCode} â€¢ 
                                    {segment.carrierCode} {segment.number}
                                  </span>
                                </div>
                              ))}
                            </div>
                          </div>

                          <div className="md:text-right flex md:flex-col items-center md:items-end gap-4">
                            <div>
                              <p className="text-3xl font-bold text-blue-600">${flight.price.total}</p>
                              <p className="text-xs text-gray-500">{flight.price.currency}</p>
                            </div>
                            
                            <div className="flex flex-col gap-2 w-full md:w-auto">
                              <button
                                onClick={() => handleBookFlight(flight)}
                                className="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition flex items-center justify-center space-x-2"
                              >
                                <span>Book Now</span>
                                <Icon name="ExternalLink" size={16} />
                              </button>
                              
                              <button
                                onClick={() => addPriceAlert(flight)}
                                className="border border-gray-300 text-gray-700 px-6 py-2 rounded-lg font-medium hover:bg-gray-50 transition flex items-center justify-center space-x-2"
                              >
                                <Icon name="Bell" size={16} />
                                <span>Set Alert</span>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            )}

            {/* Other Tabs - Deals, Alerts, Tools, Profile remain the same but truncated for space */}
            {/* Copy from previous implementation... */}
          </main>

          {/* Auth Modal */}
          {showAuthModal && (
            <div className="fixed inset-0 bg-black/50 modal-overlay flex items-center justify-center z-50 p-4">
              <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full">
                <div className="p-6 border-b flex items-center justify-between">
                  <h3 className="text-2xl font-bold">{authMode === 'signin' ? 'Sign In' : 'Create Account'}</h3>
                  <button
                    onClick={() => setShowAuthModal(false)}
                    className="p-2 hover:bg-gray-100 rounded-lg transition"
                  >
                    <Icon name="X" size={24} />
                  </button>
                </div>
                
                <div className="p-6">
                  {/* Google Sign In Button */}
                  <button
                    onClick={handleGoogleSignIn}
                    className="w-full bg-white border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-50 transition flex items-center justify-center space-x-3 mb-4"
                  >
                    <svg className="w-6 h-6" viewBox="0 0 24 24">
                      <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                      <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                      <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                      <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    <span>Continue with Google</span>
                  </button>

                  <div className="relative my-6">
                    <div className="absolute inset-0 flex items-center">
                      <div className="w-full border-t border-gray-300"></div>
                    </div>
                    <div className="relative flex justify-center text-sm">
                      <span className="px-2 bg-white text-gray-500">Or continue with email</span>
                    </div>
                  </div>

                  {/* Email Form */}
                  <div className="space-y-4">
                    {authMode === 'signup' && (
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Username</label>
                        <input
                          type="text"
                          value={authForm.username}
                          onChange={(e) => setAuthForm({ ...authForm, username: e.target.value })}
                          placeholder="Your name"
                          className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                      </div>
                    )}

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Gmail Address</label>
                      <div className="relative">
                        <Icon name="Mail" size={20} className="absolute left-3 top-3 text-gray-400" />
                        <input
                          type="email"
                          value={authForm.email}
                          onChange={(e) => setAuthForm({ ...authForm, email: e.target.value })}
                          placeholder="yourname@gmail.com"
                          className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                      </div>
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Password</label>
                      <div className="relative">
                        <Icon name="Lock" size={20} className="absolute left-3 top-3 text-gray-400" />
                        <input
                          type="password"
                          value={authForm.password}
                          onChange={(e) => setAuthForm({ ...authForm, password: e.target.value })}
                          placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                          className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                      </div>
                      {authMode === 'signup' && (
                        <p className="text-xs text-gray-500 mt-1">Minimum 8 characters</p>
                      )}
                    </div>

                    <button
                      onClick={authMode === 'signin' ? handleEmailSignIn : handleEmailSignup}
                      className="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition"
                    >
                      {authMode === 'signin' ? 'Sign In' : 'Create Account'}
                    </button>

                    <div className="text-center text-sm text-gray-600">
                      {authMode === 'signin' ? (
                        <p>
                          Don't have an account?{' '}
                          <button
                            onClick={() => setAuthMode('signup')}
                            className="text-blue-600 font-semibold hover:underline"
                          >
                            Sign up
                          </button>
                        </p>
                      ) : (
                        <p>
                          Already have an account?{' '}
                          <button
                            onClick={() => setAuthMode('signin')}
                            className="text-blue-600 font-semibold hover:underline"
                          >
                            Sign in
                          </button>
                        </p>
                      )}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Email Verification Modal */}
          {showVerificationModal && (
            <div className="fixed inset-0 bg-black/50 modal-overlay flex items-center justify-center z-50 p-4">
              <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full">
                <div className="p-6 border-b">
                  <h3 className="text-2xl font-bold">Verify Your Email</h3>
                </div>
                
                <div className="p-6">
                  <div className="text-center mb-6">
                    <div className="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                      <Icon name="Mail" size={32} className="text-blue-600" />
                    </div>
                    <p className="text-gray-600">
                      We've sent a verification code to your email address. Please enter it below.
                    </p>
                  </div>

                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Verification Code</label>
                      <input
                        type="text"
                        value={verificationCode}
                        onChange={(e) => setVerificationCode(e.target.value)}
                        placeholder="Enter 6-digit code"
                        maxLength={6}
                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-2xl tracking-widest"
                      />
                    </div>

                    {error && (
                      <div className="p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm">
                        {error}
                      </div>
                    )}

                    <button
                      onClick={handleVerifyEmail}
                      className="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition"
                    >
                      Verify Email
                    </button>

                    <button
                      onClick={() => {
                        const tempUser = JSON.parse(localStorage.getItem('tempUser') || '{}');
                        if (tempUser.email) {
                          const newCode = Math.floor(100000 + Math.random() * 900000).toString();
                          localStorage.setItem('tempUser', JSON.stringify({ ...tempUser, verificationCode: newCode }));
                          sendVerificationEmail(tempUser.email, newCode);
                        }
                      }}
                      className="w-full text-blue-600 font-semibold hover:underline"
                    >
                      Resend Code
                    </button>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Subscribe Modal */}
          {showSubscribeModal && (
            <div className="fixed inset-0 bg-black/50 modal-overlay flex items-center justify-center z-50 p-4 overflow-y-auto">
              <div className="bg-white rounded-2xl shadow-2xl max-w-4xl w-full my-8">
                <div className="p-6 border-b flex items-center justify-between bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-t-2xl">
                  <div>
                    <h3 className="text-3xl font-bold flex items-center space-x-2">
                      <Icon name="Sparkles" size={32} />
                      <span>Upgrade to Premium</span>
                    </h3>
                    <p className="text-sm opacity-90 mt-1">Unlock worldwide flight search and exclusive features</p>
                  </div>
                  <button
                    onClick={() => setShowSubscribeModal(false)}
                    className="p-2 hover:bg-white/20 rounded-lg transition"
                  >
                    <Icon name="X" size={24} />
                  </button>
                </div>
                
                <div className="p-6">
                  {/* Features Comparison */}
                  <div className="grid md:grid-cols-2 gap-6 mb-8">
                    <div className="bg-gray-50 rounded-xl p-6 border-2 border-gray-200">
                      <h4 className="text-xl font-bold mb-4 text-gray-800">Free Account</h4>
                      <ul className="space-y-3">
                        <li className="flex items-start space-x-2">
                          <Icon name="Check" size={20} className="text-green-600 mt-0.5" />
                          <span className="text-gray-600">UAE â†” USA flights only</span>
                        </li>
                        <li className="flex items-start space-x-2">
                          <Icon name="X" size={20} className="text-red-500 mt-0.5" />
                          <span className="text-gray-400">Worldwide search</span>
                        </li>
                        <li className="flex items-start space-x-2">
                          <Icon name="X" size={20} className="text-red-500 mt-0.5" />
                          <span className="text-gray-400">Price alerts</span>
                        </li>
                        <li className="flex items-start space-x-2">
                          <Icon name="X" size={20} className="text-red-500 mt-0.5" />
                          <span className="text-gray-400">Early deal access</span>
                        </li>
                        <li className="flex items-start space-x-2">
                          <Icon name="X" size={20} className="text-red-500 mt-0.5" />
                          <span className="text-gray-400">Ad-free experience</span>
                        </li>
                      </ul>
                    </div>

                    <div className="bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl p-6 border-2 border-purple-300 relative overflow-hidden">
                      <div className="absolute -right-8 -top-8 w-24 h-24 bg-yellow-400 rounded-full flex items-center justify-center">
                        <Icon name="Sparkles" size={32} className="text-white" />
                      </div>
                      <h4 className="text-xl font-bold mb-4 text-purple-800">Premium Account</h4>
                      <ul className="space-y-3">
                        <li className="flex items-start space-x-2">
                          <Icon name="Check" size={20} className="text-green-600 mt-0.5" />
                          <span className="font-semibold text-purple-900">Worldwide flight search</span>
                        </li>
                        <li className="flex items-start space-x-2">
                          <Icon name="Check" size={20} className="text-green-600 mt-0.5" />
                          <span className="font-semibold text-purple-900">Unlimited price alerts</span>
                        </li>
                        <li className="flex items-start space-x-2">
                          <Icon name="Check" size={20} className="text-green-600 mt-0.5" />
                          <span className="font-semibold text-purple-900">Early access to deals</span>
                        </li>
                        <li className="flex items-start space-x-2">
                          <Icon name="Check" size={20} className="text-green-600 mt-0.5" />
                          <span className="font-semibold text-purple-900">Priority support</span>
                        </li>
                        <li className="flex items-start space-x-2">
                          <Icon name="Check" size={20} className="text-green-600 mt-0.5" />
                          <span className="font-semibold text-purple-900">Ad-free experience</span>
                        </li>
                      </ul>
                      <div className="mt-6 bg-white rounded-lg p-4 text-center">
                        <p className="text-3xl font-bold text-purple-600">$9.99<span className="text-lg text-gray-500">/month</span></p>
                      </div>
                    </div>
                  </div>

                  {/* Payment Methods */}
                  <div className="mb-6">
                    <h4 className="font-bold text-lg mb-4">Select Payment Method</h4>
                    <div className="grid grid-cols-3 gap-4">
                      <button
                        onClick={() => setPaymentMethod('card')}
                        className={`p-4 rounded-lg border-2 transition ${
                          paymentMethod === 'card'
                            ? 'border-blue-600 bg-blue-50'
                            : 'border-gray-300 hover:border-blue-300'
                        }`}
                      >
                        <Icon name="CreditCard" size={32} className="mx-auto mb-2 text-blue-600" />
                        <p className="text-sm font-semibold">Credit Card</p>
                      </button>
                      <button
                        onClick={() => setPaymentMethod('paypal')}
                        className={`p-4 rounded-lg border-2 transition ${
                          paymentMethod === 'paypal'
                            ? 'border-blue-600 bg-blue-50'
                            : 'border-gray-300 hover:border-blue-300'
                        }`}
                      >
                        <Icon name="DollarSign" size={32} className="mx-auto mb-2 text-blue-600" />
                        <p className="text-sm font-semibold">PayPal</p>
                      </button>
                      <button
                        onClick={() => setPaymentMethod('crypto')}
                        className={`p-4 rounded-lg border-2 transition ${
                          paymentMethod === 'crypto'
                            ? 'border-blue-600 bg-blue-50'
                            : 'border-gray-300 hover:border-blue-300'
                        }`}
                      >
                        <Icon name="Zap" size={32} className="mx-auto mb-2 text-blue-600" />
                        <p className="text-sm font-semibold">Crypto</p>
                      </button>
                    </div>
                  </div>

                  {/* Payment Form */}
                  {paymentMethod === 'card' && (
                    <div className="space-y-4 mb-6">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Card Number</label>
                        <input
                          type="text"
                          value={cardDetails.number}
                          onChange={(e) => setCardDetails({ ...cardDetails, number: e.target.value })}
                          placeholder="1234 5678 9012 3456"
                          maxLength={19}
                          className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                      </div>
                      <div className="grid grid-cols-3 gap-4">
                        <div className="col-span-1">
                          <label className="block text-sm font-medium text-gray-700 mb-2">Expiry</label>
                          <input
                            type="text"
                            value={cardDetails.expiry}
                            onChange={(e) => setCardDetails({ ...cardDetails, expiry: e.target.value })}
                            placeholder="MM/YY"
                            maxLength={5}
                            className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        <div className="col-span-1">
                          <label className="block text-sm font-medium text-gray-700 mb-2">CVC</label>
                          <input
                            type="text"
                            value={cardDetails.cvc}
                            onChange={(e) => setCardDetails({ ...cardDetails, cvc: e.target.value })}
                            placeholder="123"
                            maxLength={4}
                            className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                        <div className="col-span-1">
                          <label className="block text-sm font-medium text-gray-700 mb-2">Name</label>
                          <input
                            type="text"
                            value={cardDetails.name}
                            onChange={(e) => setCardDetails({ ...cardDetails, name: e.target.value })}
                            placeholder="John Doe"
                            className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                      </div>
                    </div>
                  )}

                  {paymentMethod === 'paypal' && (
                    <div className="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6 text-center">
                      <Icon name="DollarSign" size={48} className="mx-auto mb-3 text-blue-600" />
                      <p className="text-gray-700 mb-4">You will be redirected to PayPal to complete your payment securely.</p>
                    </div>
                  )}

                  {paymentMethod === 'crypto' && (
                    <div className="bg-purple-50 border border-purple-200 rounded-lg p-6 mb-6 text-center">
                      <Icon name="Zap" size={48} className="mx-auto mb-3 text-purple-600" />
                      <p className="text-gray-700 mb-4">Cryptocurrency payment option. You will be redirected to our crypto payment processor.</p>
                    </div>
                  )}

                  {error && (
                    <div className="mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600 flex items-start space-x-2">
                      <Icon name="AlertCircle" size={20} className="mt-0.5" />
                      <span>{error}</span>
                    </div>
                  )}

                  {/* Subscribe Button */}
                  <button
                    onClick={handleSubscribe}
                    className="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-4 rounded-lg font-bold text-lg hover:from-purple-700 hover:to-blue-700 transition flex items-center justify-center space-x-2"
                  >
                    <Icon name="Sparkles" size={24} />
                    <span>Upgrade to Premium - $9.99/month</span>
                  </button>

                  <p className="text-xs text-center text-gray-500 mt-4">
                    Cancel anytime. No hidden fees. Secure payment processing.
                  </p>
                </div>
              </div>
            </div>
          )}

          {/* Booking Modal */}
          {showBookingModal && selectedFlight && (
            <div className="fixed inset-0 bg-black/50 modal-overlay flex items-center justify-center z-50 p-4">
              <div className="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div className="p-6 border-b flex items-center justify-between">
                  <h3 className="text-2xl font-bold">Book Your Flight</h3>
                  <button
                    onClick={() => setShowBookingModal(false)}
                    className="p-2 hover:bg-gray-100 rounded-lg transition"
                  >
                    <Icon name="X" size={24} />
                  </button>
                </div>
                
                <div className="p-6">
                  {/* Flight Summary */}
                  <div className="bg-blue-50 rounded-xl p-6 mb-6">
                    <h4 className="font-bold text-lg mb-4">Flight Details</h4>
                    <div className="space-y-2 text-sm">
                      <p><span className="font-semibold">Route:</span> {searchParams.from} â†’ {searchParams.to}</p>
                      <p><span className="font-semibold">Price:</span> ${selectedFlight.price.total} {selectedFlight.price.currency}</p>
                      <p><span className="font-semibold">Duration:</span> {formatDuration(selectedFlight.itineraries[0].duration)}</p>
                      <p><span className="font-semibold">Airline:</span> {selectedFlight.validatingAirlineCodes?.[0]}</p>
                    </div>
                  </div>

                  {/* Booking Partners */}
                  <h4 className="font-bold text-lg mb-4">Choose a Booking Partner</h4>
                  <p className="text-sm text-gray-600 mb-4">Select your preferred partner to complete your booking:</p>
                  
                  <div className="grid md:grid-cols-2 gap-4">
                    {bookingPartners.map((partner, index) => (
                      <a
                        key={index}
                        href={`${partner.url}?utm_source=skyscout&from=${searchParams.from}&to=${searchParams.to}`}
                        target="_blank"
                        rel="noopener noreferrer"
                        className="bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200 rounded-xl p-6 hover:border-blue-400 transition flex items-center justify-between group"
                      >
                        <div>
                          <p className="font-bold text-lg mb-1">{partner.name}</p>
                          <p className="text-sm text-gray-600">Complete booking on {partner.name}</p>
                        </div>
                        <Icon name="ExternalLink" size={24} className="text-blue-600 group-hover:translate-x-1 transition" />
                      </a>
                    ))}
                  </div>

                  <div className="mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                    <div className="flex items-start space-x-2">
                      <Icon name="Info" size={20} className="text-yellow-600 mt-0.5" />
                      <div className="text-sm text-gray-700">
                        <p className="font-semibold mb-1">Note:</p>
                        <p>You'll be redirected to our partner's website to complete your booking. Prices and availability may vary.</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Footer */}
          <footer className="bg-gray-900 text-white mt-16">
            <div className="max-w-7xl mx-auto px-4 py-12">
              <div className="grid md:grid-cols-4 gap-8 mb-8">
                <div>
                  <div className="flex items-center space-x-2 mb-4">
                    <div className="bg-gradient-to-br from-blue-600 to-purple-600 p-2 rounded-lg">
                      <Icon name="Plane" size={20} className="text-white" />
                    </div>
                    <h3 className="text-xl font-bold">SkyScout</h3>
                  </div>
                  <p className="text-gray-400 text-sm">Your trusted companion for finding the best flight deals worldwide.</p>
                </div>
                
                <div>
                  <h4 className="font-bold mb-4">Quick Links</h4>
                  <ul className="space-y-2 text-sm text-gray-400">
                    <li><a href="#" className="hover:text-white transition">About Us</a></li>
                    <li><a href="#" className="hover:text-white transition">How It Works</a></li>
                    <li><a href="#" className="hover:text-white transition">FAQ</a></li>
                    <li><a href="#" className="hover:text-white transition">Contact</a></li>
                  </ul>
                </div>
                
                <div>
                  <h4 className="font-bold mb-4">Legal</h4>
                  <ul className="space-y-2 text-sm text-gray-400">
                    <li><a href="#" className="hover:text-white transition">Privacy Policy</a></li>
                    <li><a href="#" className="hover:text-white transition">Terms of Service</a></li>
                    <li><a href="#" className="hover:text-white transition">Cookie Policy</a></li>
                  </ul>
                </div>
                
                <div>
                  <h4 className="font-bold mb-4">Follow Us</h4>
                  <p className="text-gray-400 text-sm mb-4">Stay updated with the latest deals</p>
                  <div className="flex space-x-3">
                    <a href="#" className="bg-gray-800 p-2 rounded-lg hover:bg-gray-700 transition">
                      <Icon name="Globe" size={20} />
                    </a>
                    <a href="#" className="bg-gray-800 p-2 rounded-lg hover:bg-gray-700 transition">
                      <Icon name="Sparkles" size={20} />
                    </a>
                  </div>
                </div>
              </div>
              
              <div className="border-t border-gray-800 pt-8 text-center text-sm text-gray-400">
                <p>Â© 2024 SkyScout. All rights reserved. Powered by Amadeus API.</p>
                <p className="mt-2">Not affiliated with airlines. Prices shown are indicative and may vary.</p>
              </div>
            </div>
          </footer>
        </div>
      );
    };

    ReactDOM.render(<SkyScout />, document.getElementById('root'));
  </script>
</body>
</html>
